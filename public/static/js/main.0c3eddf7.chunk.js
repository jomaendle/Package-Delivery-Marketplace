(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){},166:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(80),i=a.n(r),o=(a(89),a(4)),s=a(5),c=a(7),u=a(6),m=a(8),p=(a(10),a(167)),d=l.a.createContext(null),g=function(e){return function(t){return l.a.createElement(d.Consumer,null,function(a){return l.a.createElement(e,Object.assign({},t,{firebase:a}))})}},h=d,f=a(63),v=a.n(f);a(140);a(17).config();var b={apiKey:"AIzaSyDAkG_hpWXgI0t2wPTnvrJVf-dUjNYDx2M",authDomain:"studie2-a54cd.firebaseapp.com",databaseURL:"https://studie2-a54cd.firebaseio.com",projectId:"studie2-a54cd",storageBucket:"studie2-a54cd.appspot.com",messagingSenderId:"184172630817"},E=function e(){var t=this;Object(o.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},v.a.initializeApp(b),this.auth=v.a.auth()},y=g(function(e){var t=e.firebase;return l.a.createElement(p.a,{className:"navigation-links",to:"/"},l.a.createElement("span",{id:"signout-label",onClick:t.doSignOut},"Sign Out"))}),k=l.a.createContext(null),P=function(e){var t=function(t){function a(e){var t;return Object(o.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={authUser:null},t}return Object(m.a)(a,t),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return l.a.createElement(k.Provider,{value:this.state.authUser},l.a.createElement(e,this.props))}}]),a}(l.a.Component);return g(t)},O=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={currentPage:""},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.setState({currentPage:this.props.currentPage})}},{key:"render",value:function(){var e=this,t=function(t){return l.a.createElement("div",null,l.a.createElement("ul",{id:"navigation-bar"},l.a.createElement("li",null,"home"===e.state.currentPage?l.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/"}," Home "):l.a.createElement(p.a,{className:"navigation-links",to:"/"}," Home ")),l.a.createElement("li",null,"profile"===e.state.currentPage?l.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/profile"}," Profile "):l.a.createElement(p.a,{className:"navigation-links",to:"/profile"}," Profile ")),l.a.createElement("li",null,"package"===e.state.currentPage?l.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/packages"}," My Packages "):l.a.createElement(p.a,{className:"navigation-links",to:"/packages"}," My Packages ")),l.a.createElement("li",null,"delivery"===e.state.currentPage?l.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/driver"},"Delivery "):l.a.createElement(p.a,{className:"navigation-links",to:"/driver"}," Delivery ")),l.a.createElement("li",null,l.a.createElement(y,null))))},a=function(){return l.a.createElement("div",null,l.a.createElement("ul",{id:"navigation-bar"},l.a.createElement("li",null,"home"===e.state.currentPage?l.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/"}," Home "):l.a.createElement(p.a,{className:"navigation-links",to:"/"}," Home ")),l.a.createElement("li",null,"login"===e.state.currentPage?l.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/login"}," Sign In "):l.a.createElement(p.a,{className:"navigation-links",to:"/login"}," Sign In "))))};return l.a.createElement("div",null,l.a.createElement(k.Consumer,null,function(n){return n?l.a.createElement(t,{currentPage:e.state.currentPage}):l.a.createElement(a,{currentPage:e.state.currentPage})}))}}]),t}(l.a.Component),w=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{id:"Header"},l.a.createElement("h2",{id:"Header-label"}," Package Delivery Marketplace "))}}]),t}(n.Component),j=P(function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,{currentPage:"home"}))}}]),t}(n.Component)),N=a(27),C=a(34),L=a(171),S=a(46),A={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},D=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).onSubmit=function(e){var t=a.state,n=(t.username,t.email),l=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(n,l).then(function(e){a.setState(Object(C.a)({},A)),a.props.history.push("/signup")}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,r=e.passwordTwo,i=e.error;return l.a.createElement("div",null,l.a.createElement(w,null),l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),l.a.createElement("input",{name:"email",value:a,onChange:this.onChange,type:"text",placeholder:"Email Address"}),l.a.createElement("input",{name:"passwordOne",value:n,onChange:this.onChange,type:"password",placeholder:"Password"}),l.a.createElement("input",{name:"passwordTwo",value:r,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),l.a.createElement("button",{type:"submit"},"Sign Up"),i&&l.a.createElement("p",null,i.message)))}}]),t}(n.Component),x=function(){return l.a.createElement("p",null,"Don't have an account? ",l.a.createElement(p.a,{to:"/"},"Sign Up"))},R=Object(S.a)(L.a,g)(D),T=function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"SignUp"),l.a.createElement(R,null))},M={email:"",password:"",error:null},I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,l=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,l).then(function(){a.setState(Object(C.a)({},M)),a.props.history.push("/profile")}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.state=Object(C.a)({},M),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,r=""===a||""===t;return l.a.createElement("div",{style:{marginTop:"65px"}},l.a.createElement("h1",null,"Sign In"),l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),l.a.createElement("input",{name:"password",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),l.a.createElement("button",{disabled:r,type:"submit"},"Sign In"),n&&l.a.createElement("p",null,n.message)))}}]),t}(n.Component),W=Object(S.a)(L.a,g)(I),U=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,null),l.a.createElement(W,null),l.a.createElement(x,null))},B=P(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={userID:null,username:"",email:"",phototURL:null},a.usernameLabel=l.a.createRef(),a.emailLabel=l.a.createRef(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getUserData",value:function(){var e=this.props.firebase.auth.currentUser;null!=e&&this.setState({userID:e.uid,username:e.displayName,email:e.email,photoURL:e.photoURL})}},{key:"componentDidMount",value:function(){this.getUserData()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,{currentPage:"profile"}),l.a.createElement("div",{className:"main-content"},l.a.createElement(k.Consumer,null,function(t){return t?l.a.createElement("div",null,l.a.createElement("div",{className:"profile-information"},l.a.createElement("h3",{ref:e.usernameLabel},e.state.username?e.state.username:"Username")),l.a.createElement("div",{className:"profile-information"},l.a.createElement("span",{ref:e.emailLabel},"Email: ",e.state.email)),l.a.createElement(p.a,{to:"/profile-edit"},"Edit Profile")):l.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page.")})))}}]),t}(n.Component)),_=a(2),F=a(33),H=a.n(F),G=a(83),z=a.n(G);a(17).config();var V=P(function(e){function t(){var e;Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).getGeoLocation=function(){console.log("geo"),navigator.geolocation.watchPosition(function(e){console.log("i'm tracking you!"),navigator.geolocation.getCurrentPosition(this.setGeoLocation),console.log("get geo done")}.bind(Object(_.a)(Object(_.a)(e))),function(e){e.code===e.PERMISSION_DENIED&&console.log("you denied me :-("),this.coordinates={lat:48.78232,lng:9.17702}}.bind(Object(_.a)(Object(_.a)(e)))),e.props.callbackFromDriver?e.props.callbackFromDriver(e.coordinates):e.props.callbackFromParent&&e.props.callbackFromParent(e.coordinates),console.log("geo done")},e.state={startLocation:{lat:null,lng:null},destination:{lat:null,lng:null},googleAPIKey:"AIzaSyAjSJ2TYee4PxkeUwH-nvWTIO4MU9NEKrg",currentLatLng:{lat:null,lng:null},directionsService:null,directionsDisplay:null,place:null,mapPositionArray:[],allowMultipleClicks:!0,showAutoCompleteBar:!0,duration:"",distance:""},e.initAutocomplete=e.initAutocomplete.bind(Object(_.a)(Object(_.a)(e))),e.initMap=e.initMap.bind(Object(_.a)(Object(_.a)(e))),e.setGeoLocation=e.setGeoLocation.bind(Object(_.a)(Object(_.a)(e))),e.calculateAndDisplayRoute=e.calculateAndDisplayRoute.bind(Object(_.a)(Object(_.a)(e)));return e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.getGeoLocation(),"false"===this.props.allowMultipleClicks&&this.setState({allowMultipleClicks:!1}),"false"===this.props.showAutoCompleteBar&&this.setState({showAutoCompleteBar:!1}),this.props.startLocation&&this.setState({startLocation:this.props.startLocation,destination:this.props.destination})}},{key:"componentDidMount",value:function(){"true"===this.props.calculateRoute&&setTimeout(function(){this.calculateAndDisplayRoute()}.bind(this),350)}},{key:"handleScriptCreate",value:function(){this.getGeoLocation()}},{key:"setGeoLocation",value:function(e){this.coordinates={lat:e.coords.latitude,lng:e.coords.longitude}}},{key:"initMap",value:function(){var e=this;console.log("init"),setTimeout(function(){e.geocoder=new google.maps.Geocoder,e.map=new google.maps.Map(document.getElementById("map"),{center:{lat:e.coordinates.lat,lng:e.coordinates.lng},zoom:10}),google.maps.event.addListener(e.map,"click",function(e){this.state.allowMultipleClicks&&this.addInfoWindowForLocation(e,this.geocoder)}.bind(e)),e.setState({directionsService:new google.maps.DirectionsService,directionsDisplay:new google.maps.DirectionsRenderer({map:e.map})}),e.props.calculateRoute||e.createNewInfoWindow(e.coordinates.lat,e.coordinates.lng,e.geocoder),e.state.showAutoCompleteBar&&e.initAutocomplete(e.geocoder)},160)}},{key:"calculateAndDisplayRoute",value:function(){this.state.directionsService&&this.state.directionsDisplay&&(this.state.directionsDisplay.setMap(null),this.state.directionsDisplay.setMap(this.map),this.state.directionsService.route({origin:this.state.startLocation,destination:this.state.destination,travelMode:google.maps.TravelMode.DRIVING,provideRouteAlternatives:!0},function(e,t){if(t===google.maps.DirectionsStatus.OK){this.state.directionsDisplay.setDirections(e);for(var a=0,n=0,l=this.state.directionsDisplay.directions,r=0;r<l.routes[0].legs.length;r++)n+=l.routes[0].legs[r].distance.value,a+=l.routes[0].legs[r].duration.value;var i=n/1e3;i=i.toFixed(1);var o=new Date(null);o.setSeconds(a);var s=0;s=a<3600?o.toISOString().substr(14,5):o.toISOString().substr(11,8),this.setState({duration:s,distance:i+" km"})}else window.alert("Directions request failed due to "+t)}.bind(this)))}},{key:"initAutocomplete",value:function(e){if(this.map){var t=document.getElementById("searchTextField"),a=new google.maps.Marker({map:this.map}),n=new google.maps.places.Autocomplete(t);n.bindTo("bounds",this.map),google.maps.event.addListener(n,"place_changed",function(){this.place=n.getPlace();var t=new google.maps.LatLng(this.place.geometry.location.lat(),this.place.geometry.location.lng());this.map.setCenter(t),this.checkIfInfoWindowIsReached(),this.createNewInfoWindow(this.place.geometry.location.lat(),this.place.geometry.location.lng(),e),a.setPosition(t),this.map.setZoom(12)}.bind(this))}}},{key:"addInfoWindowForLocation",value:function(e,t){for(var a,n=0;n<this.state.mapPositionArray.length;n++)this.state.mapPositionArray[n].lat===e.latLng.lat()&&this.state.mapPositionArray[n].lon===e.latLng.lng()&&(a=this.state.mapPositionArray[n].infoWindow,this.state.mapPositionArray[n].marker),this.state.mapPositionArray[n].infoWindow&&this.state.mapPositionArray[n].infoWindow.close();this.checkIfInfoWindowIsReached(),a||this.createNewInfoWindow(e.latLng.lat(),e.latLng.lng(),t),this.props.callbackFromParent(this.state.mapPositionArray)}},{key:"checkIfInfoWindowIsReached",value:function(){if(this.state.mapPositionArray.length>1){for(var e=0;e<this.state.mapPositionArray.length;e++)this.state.mapPositionArray[e].marker.setMap(null);this.setState({mapPositionArray:[]})}}},{key:"createNewInfoWindow",value:function(e,t,a){var n,l,r={lat:e,lng:t},i={lat:e,lon:t,infoWindow:new google.maps.InfoWindow,marker:new google.maps.Marker({position:r,map:this.map})},o=this.state.mapPositionArray;o.push(i),this.setState({mapPositionArray:o}),n=i.infoWindow,l=i.marker,this.geocodeLatLng(a,this.map,n,r,l)}},{key:"geocodeLatLng",value:function(e,t,a,n,l){var r={lat:n.lat,lng:n.lng};e.geocode({location:r},function(e,n){"OK"===n?e[0]?(l.addListener("click",function(){a.open(t,l)}),this.formatted_address=e[0].formatted_address,a.setContent(e[0].formatted_address),a.open(t,l)):window.alert("No results found"):window.alert("Geocoder failed due to: "+n)})}},{key:"render",value:function(){var e="https://maps.googleapis.com/maps/api/js?libraries=places&key="+this.state.googleAPIKey;return l.a.createElement("div",null,this.state.showAutoCompleteBar?l.a.createElement("input",{type:"text",id:"searchTextField"}):"",l.a.createElement("div",{id:"map"}),l.a.createElement("div",null,this.props.calculateRoute?l.a.createElement("div",null,l.a.createElement("p",{ref:this.distanceLabel},"Distance: ",this.state.distance),l.a.createElement("p",{ref:this.durationLabel},"Duration: ",this.state.duration)):""),l.a.createElement(z.a,{url:e,onCreate:this.handleScriptCreate.bind(this),onLoad:this.initMap}))}}]),t}(n.Component));a(17).config();var K=P(function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).getDataFromMaps=function(t){e.setState({mapPositionArray:t})},e.handleSubmit=function(t){if(t.preventDefault(),2===e.state.mapPositionArray.length){var a,n=e.sizeRef.current.value,l=e.weightRef.current.value,r=e.rangeRef.current.value,i=e.commentRef.current.value,o=e.priceRef.current.value,s={lat:e.state.mapPositionArray[0].lat,lng:e.state.mapPositionArray[0].lon},c={lat:e.state.mapPositionArray[1].lat,lng:e.state.mapPositionArray[1].lon};H.a.post("https://us-central1-studienarbeit.cloudfunctions.net/parcel",{size:n,weight:l,priority:r,comment:i,price:o,startLocation:s,destination:c}).then(function(e){a=e,console.log(e)}).catch(function(e){console.log(s,c),console.log(e)});var u={size:n,weight:l,priority:r,comment:i,price:o};e.continueToFinalPage(u,a)}else alert("Please select the start and final destination of the package. ")},e.state={startLocation:{lat:null,lng:null},destination:{lat:null,lng:null},showSecondMarker:!1,mapPositionArray:[],priority:"",price:""},e.clearValues=e.clearValues.bind(Object(_.a)(Object(_.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(_.a)(Object(_.a)(e))),e.continueToFinalPage=e.continueToFinalPage.bind(Object(_.a)(Object(_.a)(e))),e.rangeRef=l.a.createRef(),e.sizeRef=l.a.createRef(),e.weightRef=l.a.createRef(),e.commentRef=l.a.createRef(),e.priceRef=l.a.createRef(),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.setState({priority:"Priority: Very High",price:"Price: 50\u20ac"})}},{key:"clearValues",value:function(){this.setState({startLocation:{lat:null,lng:null},destination:{lat:null,lng:null}})}},{key:"redirectToCompletePage",value:function(){this.props.history.push({pathname:"/driver",state:{currentLatLng:this.state.currentLatLng}})}},{key:"updatePriorityLabel",value:function(e){e.preventDefault();var t="";switch(this.rangeRef.current.value){case"1":t="Very low";break;case"2":t="Low";break;case"3":t="Normal";break;case"4":t="High";break;case"5":t="Very High";break;default:t=""}this.setState({priority:"Priority: "+t})}},{key:"updatePriceLabel",value:function(e){e.preventDefault(),this.setState({price:"Price: "+this.priceRef.current.value+"\u20ac"})}},{key:"continueToFinalPage",value:function(e,t){this.props.history.push({pathname:"/final",state:{userType:"customer",package:e,response:t}})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,{currentPage:"package"}),l.a.createElement("div",{className:"main-content"},l.a.createElement(k.Consumer,null,function(t){return t?l.a.createElement("div",null,l.a.createElement("h2",null,"Insert a new package to the marketplace"),l.a.createElement("div",null,l.a.createElement(V,{callbackFromParent:e.getDataFromMaps}),l.a.createElement("form",{onSubmit:e.handleSubmit},l.a.createElement("p",{className:"p-border"},l.a.createElement("span",{style:{fontWeight:600}},"What's the size of your package?"),l.a.createElement("select",{name:"size",ref:e.sizeRef,className:"package-insert-select"},l.a.createElement("option",{value:"small"},"S (35 x 25 x 10 cm)"),l.a.createElement("option",{value:"medium"},"M (60 x 30 x 15 cm)"),l.a.createElement("option",{value:"large"},"L (120 x 60 x 60 cm)"))),l.a.createElement("p",{className:"p-border"},l.a.createElement("span",{style:{fontWeight:600}},"How heavy is it?"),l.a.createElement("select",{name:"weight",ref:e.weightRef,className:"package-insert-select"},l.a.createElement("option",{value:"light"},"Up to 2 Kg"),l.a.createElement("option",{value:"medium"},"Up to 5 Kg"),l.a.createElement("option",{value:"heavy"},"Up to 10 Kg"))),l.a.createElement("div",{style:{marginTop:"10px"}},l.a.createElement("p",{className:"p-border"},l.a.createElement("span",{style:{fontWeight:600}},"What priority should it have?"),"  ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{style:{marginRight:"20px",display:"inline-block",width:"135px"}},e.state.priority),l.a.createElement("input",{type:"range",ref:e.rangeRef,name:"priority",min:"1",max:"5",style:{width:"250px"},onChange:function(t){e.updatePriorityLabel(t)}})),l.a.createElement("p",{className:"p-border"},l.a.createElement("span",{style:{fontWeight:600}},"Whats your maximum price?")," ",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{style:{marginRight:"20px",display:"inline-block",width:"135px"}},e.state.price),l.a.createElement("input",{type:"range",ref:e.priceRef,name:"price",min:"1",max:"100",style:{width:"250px"},onChange:function(t){e.updatePriceLabel(t)}}))),l.a.createElement("p",{className:"p-border"},l.a.createElement("span",{style:{fontWeight:600}},"Any Comments?"),l.a.createElement("textarea",{id:"package-comment",name:"comment",className:"package-insert-select",ref:e.commentRef})),l.a.createElement("div",{id:"selected-locations"},l.a.createElement("div",{className:"speech-bubble"}),l.a.createElement("div",{style:{lineHeight:"19px"}},l.a.createElement("span",{style:{fontWeight:600}},"Start Location")," ",l.a.createElement("br",null),e.state.startLocation.lat?e.state.startLocation.lat.toFixed(3):"0",", "," ",e.state.startLocation.lng?e.state.startLocation.lng.toFixed(3):"0"),l.a.createElement("br",null),l.a.createElement("div",{style:{lineHeight:"19px"}},l.a.createElement("span",{style:{fontWeight:600}}," Destination ")," ",l.a.createElement("br",null),e.state.destination.lat?e.state.destination.lat.toFixed(3):"0",",  "," ",e.state.destination.lng?e.state.destination.lng.toFixed(3):"0")),l.a.createElement("div",{style:{marginTop:"20px"}},l.a.createElement("button",{className:"buttons critical-button",onMouseDown:e.clearValues},"Clear Values"),l.a.createElement("input",{className:"buttons cta-button",type:"submit",style:{float:"right"},value:"Submit"}))))):l.a.createElement("div",null,l.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component));a(17).config();var J=P(function(e){function t(){var e;Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handlePackageClick=function(t){var a,n=t.target.querySelectorAll("span"),l=[];n.forEach(function(e){l.push(e.innerHTML)}),e.state.selectedPackages&&(e.state.selectedPackages.includes(l[0].innerHTML)||l===[])||(a={parcel_id:l[0],parcel_status:l[1],title:l[2],time_created:l[3]},e.state.selectedPackages.push(a),t.target.className="listed-packages-clicked")},e.state={packages:[{parcel_id:1,parcel_status:"home",title:"P1",time_created:"Tue, 22 Jan 2019 05:42:10 GMT"},{parcel_id:2,parcel_status:"home",title:"P2",time_created:"Tue, 22 Jan 2019 08:22:10 GMT"}],selectedPackages:[]},e.handlePackageClick=e.handlePackageClick.bind(Object(_.a)(Object(_.a)(e))),e.ReturnToPreviousPage=e.ReturnToPreviousPage.bind(Object(_.a)(Object(_.a)(e))),e.ContinueToConfirmPage=e.ContinueToConfirmPage.bind(Object(_.a)(Object(_.a)(e)));return e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){H.a.get("https://us-central1-studienarbeit.cloudfunctions.net/parceldriver",{params:{driver_position:"test",radius:""}}).then(function(e){console.log(e)}).catch(function(e){console.log(e)})}},{key:"ReturnToPreviousPage",value:function(){this.props.history.push({pathname:"/driver",state:{currentLatLng:this.state.currentLatLng}})}},{key:"ContinueToConfirmPage",value:function(){0===this.state.selectedPackages.length?alert("Select at least one package"):this.props.history.push({pathname:"/driver-confirm",state:{prevState:this.props.location.state,selectedPackages:this.state.selectedPackages}})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,{currentPage:"delivery"}),l.a.createElement("div",{className:"main-content"},l.a.createElement(k.Consumer,null,function(t){return t?l.a.createElement("div",null,l.a.createElement("h2",null,"Select one or more packages to proceed."),l.a.createElement("div",null,0!==e.state.packages.length?e.state.packages.map(function(t,a){return l.a.createElement("div",{className:"listed-packages",key:a,onMouseDown:e.handlePackageClick},l.a.createElement("span",{className:"packages-table"},t.parcel_id),l.a.createElement("span",{className:"packages-table"},t.parcel_status),l.a.createElement("span",{className:"packages-table"},t.title),l.a.createElement("span",{className:"packages-table"},t.time_created))}):l.a.createElement("div",{style:{marginBottom:"25px"}},"There are no packages available right now. Please check later again.")),l.a.createElement("button",{className:"buttons",onMouseDown:e.ReturnToPreviousPage},"Back"),l.a.createElement("button",{className:"buttons cta-button",onMouseDown:e.ContinueToConfirmPage,style:{float:"right"}},"Continue")):l.a.createElement("div",null,l.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component));a(17).config();var Y=P(function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleSubmit=function(t){e.props.history.push({pathname:"/driver-select-packages",state:{currentLatLng:e.state.currentLatLng,timeAvailable:e.state.time}})},e.getDataFromMaps=function(t){e.setState({currentLatLng:t})},e.state={currentLatLng:{lat:0,lng:0,address:""},time:0},e.rangeRef=l.a.createRef(),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({time:"Hours: 5"})}},{key:"updateTimeLabel",value:function(e){e.preventDefault(),this.setState({time:"Hours: "+this.rangeRef.current.value})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,{currentPage:"delivery"}),l.a.createElement("div",{className:"main-content"},l.a.createElement(k.Consumer,null,function(t){return t?l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h2",null,"Want to deliver packages?"),l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("span",{style:{marginBottom:"15px",marginTop:"40px",display:"block",fontWeight:600}},"Your current location"),l.a.createElement(V,{callbackFromDriver:e.getDataFromMaps,allowMultipleClicks:"false",showAutoCompleteBar:"false"}),l.a.createElement("p",{className:"p-border"},l.a.createElement("span",{style:{fontWeight:600}},"How much time do you have for delivering?"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{style:{marginRight:"15px"}},e.state.time),l.a.createElement("input",{type:"range",ref:e.rangeRef,name:"priority",min:"1",max:"5",style:{width:"250px",marginTop:"15px"},onChange:function(t){e.updateTimeLabel(t)}}))),l.a.createElement("div",{style:{marginTop:"20px"}},l.a.createElement("button",{className:"buttons cta-button",onMouseDown:e.handleSubmit,style:{float:"right"}},"Continue"))))):l.a.createElement("div",null,l.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component));a(17).config();var q=P(function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={selectedPackages:[],timeAvailable:0,currentLatLng:{lat:"",lng:""}},e.ReturnToPreviousPage=e.ReturnToPreviousPage.bind(Object(_.a)(Object(_.a)(e))),e.continueToFinalPage=e.continueToFinalPage.bind(Object(_.a)(Object(_.a)(e))),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({selectedPackages:this.props.location.state.selectedPackages,timeAvailable:this.props.location.state.prevState.timeAvailable,currentLatLng:this.props.location.state.prevState.currentLatLng})}},{key:"ReturnToPreviousPage",value:function(){this.props.history.push({pathname:"/driver-select-packages",state:{selectedPackages:this.state.selectedPackages}})}},{key:"continueToFinalPage",value:function(){this.props.history.push({pathname:"/driver-route",state:{userType:"driver"}})}},{key:"render",value:function(){var e=this;return this.state.selectedPackages?l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,{currentPage:"delivery"}),l.a.createElement("div",{className:"main-content"},l.a.createElement(k.Consumer,null,function(t){return t?l.a.createElement("div",null,l.a.createElement("h2",null,"Congrats! Check your information and submit"),l.a.createElement("div",null,l.a.createElement("p",{style:{marginBottom:"45px"}},l.a.createElement("span",{style:{fontWeight:600}},"Your available time level is:")," ",e.state.timeAvailable),l.a.createElement("p",{style:{marginBottom:"45px"}},l.a.createElement("span",{style:{fontWeight:600}},"Your current position is:")," ",e.state.currentLatLng.address," ",l.a.createElement("br",null),e.state.currentLatLng.lat.toFixed(4)," , ",e.state.currentLatLng.lng.toFixed(4)),l.a.createElement("p",null,l.a.createElement("span",{style:{fontWeight:600}},"You selected the following packages to deliver:")),e.state.selectedPackages.map(function(t,a){return l.a.createElement("div",{className:"listed-packages",key:a,onMouseDown:e.handlePackageClick},l.a.createElement("span",{className:"packages-table"},t.parcel_id),l.a.createElement("span",{className:"packages-table"},t.parcel_status),l.a.createElement("span",{className:"packages-table"},t.title),l.a.createElement("span",{className:"packages-table"},t.time_created))})),l.a.createElement("button",{className:"buttons",onMouseDown:e.ReturnToPreviousPage},"Back"),l.a.createElement("button",{className:"buttons cta-button",onMouseDown:e.continueToFinalPage,style:{float:"right"}},"Confirm")):l.a.createElement("div",null,l.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))}))):l.a.createElement("div",null,l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,null),l.a.createElement("div",{className:"main-content"},l.a.createElement("h3",null,"Congrats! Check your information and submit"),l.a.createElement("h4",null),l.a.createElement("div",null),l.a.createElement("button",{className:"buttons",onMouseDown:this.ReturnToPreviousPage},"Back"),l.a.createElement("button",{className:"buttons",style:{float:"right"}},"Submit"))))}}]),t}(n.Component)),X=P(function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={userID:null,username:"",email:"",phototURL:null},a.handleChangeUsername=a.handleChangeUsername.bind(Object(_.a)(Object(_.a)(a))),a.handleChangeEmail=a.handleChangeEmail.bind(Object(_.a)(Object(_.a)(a))),a.updateUserData=a.updateUserData.bind(Object(_.a)(Object(_.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getUserData",value:function(){var e=this.props.firebase.auth.currentUser;null!=e&&(console.log(e.uid),this.setState({userID:e.uid,username:e.displayName,email:e.email,photoURL:e.photoURL},this.showUserData))}},{key:"updateUserData",value:function(){var e=this.props.firebase.auth.currentUser;null!=e&&(e.updateProfile({displayName:this.state.username}).then(function(){}).catch(function(e){console.log("Error while changing profile information")}),e.updateEmail(this.state.email).then(function(){}).catch(function(e){console.log("Error while changing email information")}))}},{key:"showUserData",value:function(){var e=this.refs.usernameInput,t=this.refs.emailInput;null!=this.state.userID&&(e.value=this.state.username,t.value=this.state.email)}},{key:"handleChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"componentDidMount",value:function(){this.getUserData()}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,null),l.a.createElement("div",{className:"main-content"},l.a.createElement(k.Consumer,null,function(t){return t?l.a.createElement("div",null,l.a.createElement("span",null,"Username:"),l.a.createElement("input",{type:"text",ref:"usernameInput",onChange:e.handleChangeUsername}),l.a.createElement("br",null),l.a.createElement("span",null,"Email:"),l.a.createElement("input",{type:"text",ref:"emailInput",onChange:e.handleChangeEmail}),l.a.createElement("button",{onClick:e.updateUserData},"Save")):l.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page.")})))}}]),t}(n.Component)),Z=P(function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={userType:"",package:"",response:""},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({userType:this.props.location.state.userType,package:this.props.location.state.package,response:this.props.location.state.response?this.props.location.state.response:""})}},{key:"render",value:function(){var e;return"driver"===this.state.userType?e=l.a.createElement("div",null,l.a.createElement("h2",null,"Congrats!")):"customer"===this.state.userType&&(e=l.a.createElement("div",null,l.a.createElement("h2",null,"Congrats! Your package was successfully added."),l.a.createElement("div",null,"You can now relax, while we're finding the best driver for your delivery."))),l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,null),l.a.createElement("div",{className:"main-content"},l.a.createElement(k.Consumer,null,function(t){return t?l.a.createElement("div",{style:{paddingTop:"24px",textAlign:"center"}},l.a.createElement("img",{style:{width:"150px"},alt:"Shows a route between two points",src:"/assets/distance.png"}),e):l.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page.")})))}}]),t}(n.Component));a(17).config();var $=P(function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleSubmit=function(t){e.props.history.push({pathname:"/driver-select-packages",state:{currentLatLng:e.state.currentLatLng,timeAvailable:e.state.time}})},e.state={startLocation:{lat:48.57767,lng:9.265834},destination:{lat:48.558917,lng:9.211809},time:0},e.pickedUpButton=l.a.createRef(),e.submittedButton=l.a.createRef(),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,{currentPage:"delivery"}),l.a.createElement("div",{className:"main-content"},l.a.createElement(k.Consumer,null,function(t){return t?l.a.createElement("div",null,l.a.createElement("h2",null,"Here's your route!"),l.a.createElement(V,{allowMultipleClicks:"false",showAutoCompleteBar:"false",startLocation:e.state.startLocation,destination:e.state.destination,calculateRoute:"true"}),l.a.createElement("button",{className:"buttons",ref:e.pickedUpButton},"Picked Up"),l.a.createElement("button",{className:"buttons cta-button",ref:e.submittedButton,style:{float:"right"}},"Submitted")):l.a.createElement("div",null,l.a.createElement("div",{className:"userNotLoggedInlabel"},"Please log in to access this page."))})))}}]),t}(n.Component)),Q=P(function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={packages:[{parcel_id:1,parcel_status:"home",title:"P1",time_created:"Tue, 22 Jan 2019 05:42:10 GMT"},{parcel_id:2,parcel_status:"ready",title:"P2",time_created:"Tue, 22 Jan 2019 08:22:10 GMT"}]},e.removePackage=e.removePackage.bind(Object(_.a)(Object(_.a)(e))),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){}},{key:"removePackage",value:function(e,t){this.state.packages.length>0&&(e.preventDefault(),"my-packages-container"!==e.target.parentElement.id&&(e.target.parentElement.classList.add("hidden"),setTimeout(function(){var e=this.state.packages.filter(function(e){return e.parcel_id!==t});this.setState({packages:e})}.bind(this),1150)))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"App"},l.a.createElement(w,null),l.a.createElement(O,{currentPage:"package"}),l.a.createElement("div",{className:"main-content"},l.a.createElement(k.Consumer,null,function(t){return t?l.a.createElement("div",{id:"my-packages-container"},l.a.createElement("h2",null,"Manage your packages."),l.a.createElement(p.a,{to:"/new-package"},l.a.createElement("button",{className:"buttons cta-button",style:{position:"absolute",top:0,right:0,marginRight:0}},"Add Package")),e.state.packages.map(function(t,a){return l.a.createElement("div",{className:"listed-packages",key:t.parcel_id,onClick:function(a){return e.removePackage(a,t.parcel_id)}},l.a.createElement("span",{className:"packages-table"},t.parcel_id),l.a.createElement("span",{className:"packages-table"},t.parcel_status),l.a.createElement("span",{className:"packages-table"},t.title),l.a.createElement("span",{className:"packages-table"},t.time_created),l.a.createElement("input",{alt:"",className:"delete-package-button",src:"/assets/delete-button.png",type:"image"}))}),console.log(t.uid)):l.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page.")})))}}]),t}(n.Component)),ee=a(169),te=a(170),ae=a(168);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(17).load(),i.a.render(l.a.createElement(h.Provider,{value:new E},l.a.createElement(ee.a,null,l.a.createElement(te.a,null,l.a.createElement(ae.a,{exact:!0,path:"/",component:j}),l.a.createElement(ae.a,{exact:!0,path:"/login",component:U}),l.a.createElement(ae.a,{exact:!0,path:"/signup",component:T}),l.a.createElement(ae.a,{exact:!0,path:"/profile",component:B}),l.a.createElement(ae.a,{exact:!0,path:"/profile-edit",component:X}),l.a.createElement(ae.a,{exact:!0,path:"/new-package",component:K}),l.a.createElement(ae.a,{exact:!0,path:"/packages",component:Q}),l.a.createElement(ae.a,{exact:!0,path:"/driver-select-packages",component:J}),l.a.createElement(ae.a,{exact:!0,path:"/driver",component:Y}),l.a.createElement(ae.a,{exact:!0,path:"/driver-confirm",component:q}),l.a.createElement(ae.a,{exact:!0,path:"/driver-route",component:$}),l.a.createElement(ae.a,{exact:!0,path:"/final",component:Z})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},84:function(e,t,a){e.exports=a(166)},89:function(e,t,a){}},[[84,2,1]]]);
//# sourceMappingURL=main.0c3eddf7.chunk.js.map