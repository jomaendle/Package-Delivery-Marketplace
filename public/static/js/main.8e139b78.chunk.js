(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){},181:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(86),r=a.n(i),l=(a(96),a(4)),o=a(5),c=a(8),u=a(6),m=a(7),p=(a(11),a(183)),d=s.a.createContext(null),g=function(e){return function(t){return s.a.createElement(d.Consumer,null,function(a){return s.a.createElement(e,Object.assign({},t,{firebase:a}))})}},h=d,f=a(27),v=a.n(f);a(146);a(31).config();var k={apiKey:"AIzaSyDM3QLzPgBQhSX7gfx16imFoCFm3j_B1pM",authDomain:"studienarbeit.firebaseapp.com",databaseURL:"https://studienarbeit.firebaseio.com",projectId:"studienarbeit",storageBucket:"studienarbeit.appspot.com",messagingSenderId:"292162895758"},b=function e(){var t=this;Object(l.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},v.a.initializeApp(k),this.auth=v.a.auth()},E=g(function(e){var t=e.firebase;return s.a.createElement(p.a,{to:"/"},s.a.createElement("span",{id:"signout-label",onClick:t.doSignOut},"Sign Out"))}),y=s.a.createContext(null),w=function(e){var t=function(t){function a(e){var t;return Object(l.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={authUser:null},t}return Object(m.a)(a,t),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return s.a.createElement(y.Provider,{value:this.state.authUser},s.a.createElement(e,this.props))}}]),a}(s.a.Component);return g(t)},P=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={currentPage:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.setState({currentPage:this.props.currentPage})}},{key:"render",value:function(){var e=this,t=function(t){return s.a.createElement("div",null,s.a.createElement("ul",{id:"navigation-bar"},s.a.createElement("li",null,"home"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",to:"/"}," Home "):s.a.createElement(p.a,{to:"/"}," Home ")),s.a.createElement("li",null,"profile"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",to:"/profile"}," Profile "):s.a.createElement(p.a,{to:"/profile"}," Profile ")),s.a.createElement("li",null,"package"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",to:"/packages"}," My Packages "):s.a.createElement(p.a,{to:"/packages"}," My Packages ")),s.a.createElement("li",null,"delivery"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",to:"/drives"},"My Deliveries "):s.a.createElement(p.a,{to:"/drives"}," My Deliveries ")),s.a.createElement("li",null,s.a.createElement(E,null))))},a=function(){return s.a.createElement("div",null,s.a.createElement("ul",{id:"navigation-bar"},s.a.createElement("li",null,"home"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",to:"/"}," Home "):s.a.createElement(p.a,{to:"/"}," Home ")),s.a.createElement("li",null,"login"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",to:"/login"}," Sign In "):s.a.createElement(p.a,{to:"/login"}," Sign In "))))};return s.a.createElement("div",null,s.a.createElement(y.Consumer,null,function(n){return n?s.a.createElement(t,{currentPage:e.state.currentPage}):s.a.createElement(a,{currentPage:e.state.currentPage})}))}}]),t}(s.a.Component),O=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._isMobileMenuShown=!1,e.showMenu=function(t){!1===e._isMobileMenuShown?(e.mobileMenuRef.current.style.display="block",e.mobileMenuRef.current.classList.add("mobile-menu-visible"),e._isMobileMenuShown=!0):(e.mobileMenuRef.current.style.display="none",e._isMobileMenuShown=!1)},e.mobileMenuRef=s.a.createRef(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"Header"},s.a.createElement("div",null,s.a.createElement("img",{id:"mobile-menu-logo",alt:"Shows a route between two points",src:"/assets/menu.png",onClick:function(t){return e.showMenu(t)}}),s.a.createElement("div",{ref:this.mobileMenuRef,id:"mobile-menu"},s.a.createElement(P,null))),s.a.createElement("h2",{id:"Header-label"}," Package Delivery Marketplace "))}}]),t}(n.Component),N=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._username=null,e._iconSize="60px",e._iconMarginRight="30px",e.state={userToken:null,username:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({userToken:this.props.location.state.userToken})}},{key:"componentDidMount",value:function(){document.title="Home - Package Delivery Marketplace"}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"home"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("div",{style:{display:"none"}},e._username?"":e._username=t.displayName),s.a.createElement("h2",{style:{paddingLeft:"10px"}},"Hello ",e._username?e._username+",":"User,"),s.a.createElement("p",{className:"home-text",style:{marginTop:"-10px"}},"On this place, you can either insert packages with a need to deliver or delivering packages on your own.",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("img",{style:{width:e._iconSize,float:"left",marginRight:e._iconMarginRight},alt:"Shows an icon of a person",src:"/assets/packing.png"}),"If you go to"," ",s.a.createElement(p.a,{style:{color:"#4e83c5",fontFamily:"'Muli', sans-serif"},to:"/packages"},"Packages"),", you can view your current packages or add new ones."),s.a.createElement("p",{className:"home-text"},s.a.createElement("img",{style:{width:e._iconSize,float:"left",marginRight:e._iconMarginRight},alt:"Shows an icon of a person",src:"/assets/transport.png"}),"On the"," ",s.a.createElement(p.a,{style:{color:"#4e83c5",fontFamily:"'Muli', sans-serif"},to:"/driver"},"Delivery")," ","page, you can view your past drives or start a new delivery."),s.a.createElement("p",{className:"home-text"},s.a.createElement("img",{style:{width:e._iconSize,float:"left",marginRight:e._iconMarginRight},alt:"Shows an icon of a person",src:"/assets/man.png"}),"On the"," ",s.a.createElement(p.a,{style:{color:"#4e83c5",fontFamily:"'Muli', sans-serif"},to:"/profile"},"Profile")," ","page, you can see your information and your current rating basend of your deliveries.")):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Welcome to the Package Delivery Marketplace PDM."))})))}}]),t}(n.Component)),j=a(32),x=a(33),S=a(187),D=a(50),C=a(1),T={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this))).onSubmit=function(e){var t=a.state,n=t.username,s=t.email,i=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(s,i).then(function(e){return function(){return this.props.firebase.user(e.user.uid).set({username:n,email:s})}.bind(Object(C.a)(Object(C.a)(a)))}).then(function(){a.setState(Object(x.a)({},T)),a.props.history.push("/login")}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(j.a)({},e.target.name,e.target.value)),a.submitButton.current.disabled?a.submitButton.current.className="button-disabled":a.submitButton.current.className="buttons"},a.state=Object(x.a)({},T),a.submitButton=s.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.title="Sign Up - Package Delivery Marketplace"}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,i=e.passwordTwo,r=e.error,l=n!==i||""===n||""===a||""===t;return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"main-content"},s.a.createElement("div",{className:"tile"},s.a.createElement("h1",{style:{textAlign:"center",marginBottom:"40px"}},"Sign Up"),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("input",{name:"username",className:"sign-up-form",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),s.a.createElement("br",null),s.a.createElement("input",{name:"email",value:a,className:"sign-up-form",onChange:this.onChange,type:"text",placeholder:"Email Address"}),s.a.createElement("br",null),s.a.createElement("input",{name:"passwordOne",value:n,className:"sign-up-form",onChange:this.onChange,type:"password",placeholder:"Password"}),s.a.createElement("br",null),s.a.createElement("input",{name:"passwordTwo",value:i,className:"sign-up-form",onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),s.a.createElement("br",null),s.a.createElement("button",{id:"sign-up-button",className:"button-disabled",ref:this.submitButton,disabled:l,type:"submit"},"Sign Up"),r&&s.a.createElement("p",null,r.message)))))}}]),t}(n.Component),M=function(){return s.a.createElement("p",null,"Don't have an account?"," ",s.a.createElement(p.a,{style:{fontFamily:"'Muli', sans-serif"},to:"/signup"},"Sign Up"))},A=Object(D.a)(S.a,g)(L),R=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"login"}),s.a.createElement(A,null))},U=a(17),_=a.n(U),I={email:"",password:"",error:null},F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,s=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,s).then(function(){var e;a.setState(Object(x.a)({},I)),_.a.auth().currentUser.getIdToken(!0).then(function(t){e=t,console.log(t)}).catch(function(e){}),a.props.history.push({pathname:"/",state:{userToken:e}})}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(j.a)({},e.target.name,e.target.value))},a.state=Object(x.a)({},I),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.title="Sign In - Package Delivery Marketplace"}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,i=""===a||""===t;return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"main-content"},s.a.createElement("div",{className:"tile"},s.a.createElement("h1",{style:{textAlign:"center",marginBottom:"40px"}},"Sign In"),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",className:"sign-up-form",placeholder:"Email Address"}),s.a.createElement("br",null),s.a.createElement("input",{name:"password",value:a,onChange:this.onChange,className:"sign-up-form",type:"password",placeholder:"Password"}),s.a.createElement("br",null),s.a.createElement("button",{id:"sign-up-button",className:"buttons",disabled:i,type:"submit"},"Sign In"),n&&s.a.createElement("p",null,n.message)))))}}]),t}(n.Component),W=Object(D.a)(S.a,g)(F),B=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"login"}),s.a.createElement(W,null),s.a.createElement(M,null))},z=w(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={userID:null,username:"",email:"",phototURL:null},a.usernameLabel=s.a.createRef(),a.emailLabel=s.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getUserData",value:function(){var e=this.props.firebase.auth.currentUser;null!=e&&this.setState({userID:e.uid,username:e.displayName,email:e.email,photoURL:e.photoURL})}},{key:"componentDidMount",value:function(){document.title="Profile - Package Delivery Marketplace",this.getUserData()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"profile"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile",style:{height:"300px"}},s.a.createElement("div",{className:"profile-information"},s.a.createElement("h2",{ref:e.usernameLabel},e.state.username?e.state.username:"Username"),s.a.createElement("img",{style:{width:"70px",position:"absolute",right:"40px",top:"50px"},alt:"Shows an icon of a person",src:"/assets/avatar.png"})),s.a.createElement("div",{className:"profile-information"},s.a.createElement("span",{ref:e.emailLabel},"Email: ",e.state.email)),s.a.createElement(p.a,{to:"/profile-edit"},s.a.createElement("button",{className:"buttons cta-button",style:{float:"right",marginRight:"10px",bottom:"-145px",position:"relative"}},"Edit Profile"))):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component)),H=a(9),J=a.n(H),V=a(12),Y=a(89),K=a.n(Y),G=function(e,t){return new Promise(function(a,n){K.a.post("https://europe-west1-studienarbeit.cloudfunctions.net/"+e,t,{headers:{"Content-Type":"application/json"}}).then(function(e){a(e)}).catch(function(e){console.log(e),n(null)})})},Q=a(90),X=a.n(Q);a(31).config();var Z=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).drawRouteOnMaps=function(t,a,n,s){return new Promise(function(i,r){e.state.directionsService&&e.state.directionsDisplay&&(e.state.directionsDisplay.setMap(null),e.state.directionsDisplay.setMap(e.map),null!==n?e.state.directionsService.route({origin:t,destination:a,waypoints:n,travelMode:google.maps.TravelMode.DRIVING},function(e,t){t===google.maps.DirectionsStatus.OK?(this.handleDirectionsResponse(e),i("success")):r("error")}.bind(Object(C.a)(Object(C.a)(e)))):e.state.directionsService.route({origin:t,destination:a,travelMode:google.maps.TravelMode.DRIVING},function(e,t){t===google.maps.DirectionsStatus.OK?(this.handleDirectionsResponse(e),i("Success")):r("error")}.bind(Object(C.a)(Object(C.a)(e)))),s||e.state.directionsDisplay.setMap(null))})},e.calculateAndDisplayRoute=function(){var t=Object(V.a)(J.a.mark(function t(a){var n,s;return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({pickUpButtonText:"Next Pickup"}),n=JSON.stringify({user_token:e.props.userToken,current_location:e.state.startLocation,parcel_id:e.state.jobResponse.parcel_id}),t.next=4,G("pd_status",n);case 4:(s=t.sent).data&&(e.setState({jobResponse:{parcel_id:s.data.parcel_id,location:s.data.location}}),console.log(s),e.drawRouteOnMaps(e.state.startLocation,e.state.jobResponse.location,null,!0),e.setState({startLocation:e.state.jobResponse.location}),0===s.data.length&&e.routeFinished());case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.state={startLocation:{lat:null,lng:null},destination:{lat:null,lng:null},googleAPIKey:"AIzaSyAjSJ2TYee4PxkeUwH-nvWTIO4MU9NEKrg",currentLatLng:{lat:null,lng:null},directionsService:null,directionsDisplay:null,place:null,mapPositionArray:[],allowMultipleClicks:!0,allowSingleClicks:!0,showAutoCompleteBar:!0,duration:"",distance:"",scriptLoaded:!1,waypoints:[],numberOfClicksAllowed:2,coordinates:{lat:48.78232,lng:9.17702},openPackages:[],pickedUpPackages:[],pickedUpClicked:!1,currentPackageState:"",jobResponse:{parcel_id:"",location:null},pickUpButtonClass:"buttons",pickUpButtonText:"Next Pickup",buttonCliked:!1},e.initAutocomplete=e.initAutocomplete.bind(Object(C.a)(Object(C.a)(e))),e.initMap=e.initMap.bind(Object(C.a)(Object(C.a)(e))),e.calculateAndDisplayRoute=e.calculateAndDisplayRoute.bind(Object(C.a)(Object(C.a)(e))),e.successDiv=s.a.createRef(),e.pickUpButton=s.a.createRef(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){if(this.props.numberOfClicksAllowed&&this.setState({numberOfClicksAllowed:parseInt(this.props.numberOfClicksAllowed,10)}),"false"===this.props.showAutoCompleteBar&&this.setState({showAutoCompleteBar:!1}),this.props.startLocation&&this.setState({startLocation:this.props.startLocation,destination:this.props.destination}),this.props.waypoints){this.setState({waypointsDetails:this.props.waypoints});for(var e=0;e<this.props.waypoints.length;e++)this.state.waypoints.push({location:this.props.waypoints[e].coords,stopover:!0})}this.setState({pickedUpClicked:this.props.pickedUpClicked})}},{key:"componentDidMount",value:function(){"true"===this.props.calculateRoute&&setTimeout(function(){this.calculateAndDisplayRoute()}.bind(this),50)}},{key:"initMap",value:function(){this.geocoder=new google.maps.Geocoder,this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:this.state.coordinates.lat,lng:this.state.coordinates.lng},zoom:10}),google.maps.event.addListener(this.map,"click",function(e){this.state.numberOfClicksAllowed>0&&this.addInfoWindowForLocation(e,this.geocoder)}.bind(this)),this.setState({directionsService:new google.maps.DirectionsService,directionsDisplay:new google.maps.DirectionsRenderer({map:this.map})}),this.state.showAutoCompleteBar&&this.initAutocomplete(this.geocoder)}},{key:"handleDirectionsResponse",value:function(e){var t=0,a=0;this.state.directionsDisplay.setDirections(e);for(var n=this.state.directionsDisplay.directions,s=0;s<n.routes[0].legs.length;s++)t+=n.routes[0].legs[s].distance.value,a+=n.routes[0].legs[s].duration.value;var i=t/1e3;i=i.toFixed(1);var r=new Date(null);r.setSeconds(a);var l=0;a<3600?l=r.toISOString().substr(14,5):(l=r.toISOString().substr(11,8),l=r.toISOString().substr(11,8)),this.setState({duration:l,distance:i+" km"})}},{key:"routeFinished",value:function(){this.successDiv.current.style.display="inherit",this.pickUpButton.current.disabled=!0,this.setState({pickUpButtonClass:"button-disabled"})}},{key:"initAutocomplete",value:function(e){if(this.map){var t=document.getElementById("searchTextField"),a=(new google.maps.Marker({map:this.map}),new google.maps.places.Autocomplete(t));a.bindTo("bounds",this.map),google.maps.event.addListener(a,"place_changed",function(){this.place=a.getPlace();var t=new google.maps.LatLng(this.place.geometry.location.lat(),this.place.geometry.location.lng());this.map.setCenter(t),this.checkIfInfoWindowIsReached(),this.createNewInfoWindow(this.place.geometry.location.lat(),this.place.geometry.location.lng(),e),this.props.callbackFromDriver?this.props.callbackFromDriver({lat:this.place.geometry.location.lat(),lng:this.place.geometry.location.lng()}):this.props.callbackFromParent&&this.props.callbackFromParent(this.state.coordinates),this.map.setZoom(11)}.bind(this))}}},{key:"addInfoWindowForLocation",value:function(e,t){for(var a,n=0;n<this.state.mapPositionArray.length;n++)this.state.mapPositionArray[n].lat===e.latLng.lat()&&this.state.mapPositionArray[n].lon===e.latLng.lng()&&(a=this.state.mapPositionArray[n].infoWindow),this.state.mapPositionArray[n].infoWindow&&this.state.mapPositionArray[n].infoWindow.close();this.checkIfInfoWindowIsReached(),a||this.createNewInfoWindow(e.latLng.lat(),e.latLng.lng(),t),this.props.callbackFromParent?this.props.callbackFromParent(this.state.mapPositionArray):this.props.callbackFromDriver&&this.props.callbackFromDriver({lat:e.latLng.lat(),lng:e.latLng.lng()})}},{key:"checkIfInfoWindowIsReached",value:function(){if(this.state.mapPositionArray.length>this.state.numberOfClicksAllowed-1){for(var e=0;e<this.state.mapPositionArray.length;e++)this.state.mapPositionArray[e].marker.setMap(null);this.setState({mapPositionArray:[]})}}},{key:"createNewInfoWindow",value:function(e,t,a){var n,s,i={lat:e,lng:t},r={lat:e,lon:t,infoWindow:new google.maps.InfoWindow,marker:new google.maps.Marker({position:i,map:this.map})},l=this.state.mapPositionArray;l.push(r),this.setState({mapPositionArray:l}),n=r.infoWindow,s=r.marker,this.geocodeLatLng(a,this.map,n,i,s)}},{key:"geocodeLatLng",value:function(e,t,a,n,s){var i={lat:n.lat,lng:n.lng};e.geocode({location:i},function(e,n){"OK"===n?e[0]?(s.addListener("click",function(){a.open(t,s)}),this.formatted_address=e[0].formatted_address,this.props.getFormattedAddress&&this.props.getFormattedAddress(e[0].formatted_address),a.setContent(e[0].formatted_address),a.open(t,s)):window.alert("No results found"):window.alert("Geocoder failed due to: "+n)}.bind(this))}},{key:"render",value:function(){var e="https://maps.googleapis.com/maps/api/js?libraries=places&key="+this.state.googleAPIKey;return s.a.createElement("div",null,s.a.createElement("div",{className:"success-div",style:{display:"none"},ref:this.successDiv},"Congratulations! You delivered all packages successfully."),this.state.showAutoCompleteBar?s.a.createElement("input",{type:"text",id:"searchTextField"}):"",s.a.createElement("div",{id:"map"}),s.a.createElement("div",null,this.props.calculateRoute?s.a.createElement("div",{style:{margin:"20px 0",overflow:"hidden",marginLeft:"-24px"}},s.a.createElement("div",{style:{float:"left"}},s.a.createElement("img",{style:{width:"38px",marginLeft:"28px",position:"relative",top:"16px"},alt:"Shows an icon of a person",src:"/assets/distance1.png"}),s.a.createElement("span",{style:{fontSize:"18px",marginLeft:"15px",fontWeight:600}},this.state.distance),s.a.createElement("span",{className:"route-details",ref:this.distanceLabel},"Distance")),s.a.createElement("div",{style:{marginLeft:"20px",overflow:"hidden"}},s.a.createElement("img",{style:{width:"38px",marginLeft:"28px",position:"relative",top:"20px"},alt:"Shows an icon of a person",src:"/assets/duration.png"}),s.a.createElement("span",{style:{fontSize:"18px",marginLeft:"15px",fontWeight:600}},this.state.duration),s.a.createElement("span",{className:"route-details",ref:this.durationLabel},"Duration"," "),s.a.createElement("div",null,this.state.currentPackageState)),s.a.createElement("button",{className:this.state.pickUpButtonClass,ref:this.pickUpButton,onClick:this.calculateAndDisplayRoute,style:{marginTop:"20px",marginBottom:0,marginLeft:"20px",float:"right"}},this.state.pickUpButtonText)):""),s.a.createElement(X.a,{url:e,onLoad:this.initMap.bind(this)}))}}]),t}(n.Component));a(31).config();var $=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).getDataFromMaps=function(t){e.setState({mapPositionArray:t})},e.handleSubmit=function(){var t=Object(V.a)(J.a.mark(function t(a){var n,s,i,r,l,o,c,u,m,p;return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),2!==e.state.mapPositionArray.length){t.next=18;break}return n=e.sizeRef.current.value,s=e.weightRef.current.value,i=e.rangeRef.current.value,r=e.commentRef.current.value,l=e.priceRef.current.value,o=e.state.userToken,console.log(o),c={lat:e.state.mapPositionArray[0].lat,lng:e.state.mapPositionArray[0].lon},u={lat:e.state.mapPositionArray[1].lat,lng:e.state.mapPositionArray[1].lon},m=JSON.stringify({action:"submit",user_token:o,price:l,size:n,weight:s,priority:i,comment:r,pickup_location:c,destination_location:u}),t.next=14,G("parcel",m);case 14:(p=t.sent)?(e.continueToFinalPage(m,void 0,!0),console.log(p)):e.continueToFinalPage(m,void 0,!1),t.next=19;break;case 18:alert("Please select the start and final destination of the package. ");case 19:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.state={startLocation:{lat:null,lng:null},destination:{lat:null,lng:null},showSecondMarker:!1,mapPositionArray:[],priority:"",price:"",userToken:null},e.clearValues=e.clearValues.bind(Object(C.a)(Object(C.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(C.a)(Object(C.a)(e))),e.continueToFinalPage=e.continueToFinalPage.bind(Object(C.a)(Object(C.a)(e))),e.getUserToken=e.getUserToken.bind(Object(C.a)(Object(C.a)(e))),e.rangeRef=s.a.createRef(),e.sizeRef=s.a.createRef(),e.weightRef=s.a.createRef(),e.commentRef=s.a.createRef(),e.priceRef=s.a.createRef(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.getUserToken()}},{key:"componentDidMount",value:function(){document.title="Insert a new Package - Package Delivery Marketplace",this.setState({priority:"Priority: Very High",price:"Price: 50\u20ac"})}},{key:"clearValues",value:function(){this.setState({startLocation:{lat:null,lng:null},destination:{lat:null,lng:null}})}},{key:"getUserToken",value:function(){v.a.auth().currentUser&&v.a.auth().currentUser.getIdToken(!0).then(function(e){this.setState({userToken:e})}.bind(this)).catch(function(e){})}},{key:"redirectToCompletePage",value:function(){this.props.history.push({pathname:"/driver",state:{currentLatLng:this.state.currentLatLng}})}},{key:"updatePriorityLabel",value:function(e){e.preventDefault();var t="";switch(this.rangeRef.current.value){case"1":t="Very low";break;case"2":t="Low";break;case"3":t="Normal";break;case"4":t="High";break;case"5":t="Very High";break;default:t=""}this.setState({priority:"Priority: "+t})}},{key:"updatePriceLabel",value:function(e){e.preventDefault(),this.setState({price:"Price: "+this.priceRef.current.value+"\u20ac"})}},{key:"continueToFinalPage",value:function(e,t,a){this.props.history.push({pathname:"/final",state:{userType:"customer",package:e,response:t,success:a}})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"package"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{id:"driver-site-div",className:"tile"},s.a.createElement("h2",null,"Insert a new package to the marketplace"),s.a.createElement("div",null,s.a.createElement(Z,{callbackFromParent:e.getDataFromMaps,numberOfClicksAllowed:"2"}),s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"What's the size of your package?"),s.a.createElement("select",{name:"size",ref:e.sizeRef,className:"package-insert-select"},s.a.createElement("option",{value:"S"},"S (35 x 25 x 10 cm)"),s.a.createElement("option",{value:"M"},"M (60 x 30 x 15 cm)"),s.a.createElement("option",{value:"L"},"L (120 x 60 x 60 cm)"))),s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"How heavy is it?"),s.a.createElement("select",{name:"weight",ref:e.weightRef,className:"package-insert-select"},s.a.createElement("option",{value:"light"},"Up to 2 Kg"),s.a.createElement("option",{value:"medium"},"Up to 5 Kg"),s.a.createElement("option",{value:"heavy"},"Up to 10 Kg"))),s.a.createElement("div",{style:{marginTop:"10px"}},s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"What priority should it have?")," ",s.a.createElement("br",null),s.a.createElement("span",{style:{marginRight:"20px",display:"inline-block",width:"135px"}},e.state.priority),s.a.createElement("input",{type:"range",ref:e.rangeRef,name:"priority",min:"1",max:"5",style:{width:"250px"},onChange:function(t){e.updatePriorityLabel(t)}})),s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"Whats your maximum price?")," ",s.a.createElement("br",null),s.a.createElement("span",{style:{marginRight:"20px",display:"inline-block",width:"135px"}},e.state.price),s.a.createElement("input",{type:"range",ref:e.priceRef,name:"price",min:"1",max:"100",style:{width:"250px"},onChange:function(t){e.updatePriceLabel(t)}}))),s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"Any Comments?"),s.a.createElement("textarea",{id:"package-comment",name:"comment",className:"package-insert-select",ref:e.commentRef})),s.a.createElement("div",{id:"selected-locations"},s.a.createElement("div",{className:"speech-bubble"}),s.a.createElement("div",{style:{lineHeight:"19px"}},s.a.createElement("span",{style:{fontWeight:600}},"Start Location")," ",s.a.createElement("br",null),e.state.startLocation.lat?e.state.startLocation.lat.toFixed(3):"0",","," ",e.state.startLocation.lng?e.state.startLocation.lng.toFixed(3):"0"),s.a.createElement("br",null),s.a.createElement("div",{style:{lineHeight:"19px"}},s.a.createElement("span",{style:{fontWeight:600}}," Destination ")," ",s.a.createElement("br",null),e.state.destination.lat?e.state.destination.lat.toFixed(3):"0",","," ",e.state.destination.lng?e.state.destination.lng.toFixed(3):"0")),s.a.createElement("div",{style:{marginTop:"20px"}},s.a.createElement("button",{className:"buttons critical-button",onMouseDown:e.clearValues},"Clear Values"),s.a.createElement("input",{className:"buttons cta-button",type:"submit",style:{float:"right"},value:"Submit"}))))):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component));a(31).config();var q=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._packageSelected=!1,e.handlePackageClick=function(t,a){e.state.selectedPackages.includes(e.state.packages[a])||e.state.selectedPackages.push(e.state.packages[a]),"DIV"===t.target.tagName?t.target.className="listed-packages-clicked":"SPAN"===t.target.tagName&&"DIV"===t.target.parentElement.tagName&&(t.target.parentElement.className="listed-packages-clicked")},e.state={packages:[],selectedPackages:[],userToken:null,loading:!0},e.handlePackageClick=e.handlePackageClick.bind(Object(C.a)(Object(C.a)(e))),e.ReturnToPreviousPage=e.ReturnToPreviousPage.bind(Object(C.a)(Object(C.a)(e))),e.ContinueToConfirmPage=e.ContinueToConfirmPage.bind(Object(C.a)(Object(C.a)(e))),e.getDriverPackages=e.getDriverPackages.bind(Object(C.a)(Object(C.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&(this.setState({radius:this.props.location.state.radius,userToken:this.props.location.state.userToken,currentLatLng:this.props.location.state.currentLatLng,formattedAddress:this.props.location.state.formattedAddress}),this.getDriverPackages(),setTimeout(function(){this.setState({loading:!1})}.bind(this),3500))}},{key:"componentDidMount",value:function(){document.title="Select Packages - Package Delivery Marketplace"}},{key:"getDriverPackages",value:function(){var e=Object(V.a)(J.a.mark(function e(){var t,a;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.props.location.state.currentLatLng&&this.props.location.state.userToken&&this.props.location.state.radius)){e.next=6;break}return t=JSON.stringify({driver_position:this.props.location.state.currentLatLng,radius:this.props.location.state.radius,user_token:this.props.location.state.userToken}),e.next=4,G("pd_suggestions",t);case 4:null!==(a=e.sent)?(console.log(a),this.setState({packages:a.data,loading:!1})):this.setState({loading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"ReturnToPreviousPage",value:function(){this.props.history.push({pathname:"/driver",state:{currentLatLng:this.state.currentLatLng}})}},{key:"ContinueToConfirmPage",value:function(){0===this.state.selectedPackages.length?alert("Select at least one package"):this.props.history.push({pathname:"/driver-confirm",state:{prevState:this.props.location.state,selectedPackages:this.state.selectedPackages,userToken:this.state.userToken,formattedAddress:this.state.formattedAddress}})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"delivery"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("h2",null,"Select one or more packages to proceed."),s.a.createElement("div",null,0!==e.state.packages.length?e.state.packages.map(function(t,a){return s.a.createElement("div",{className:"listed-packages",key:a,onMouseDown:function(t){return e.handlePackageClick(t,a)}},s.a.createElement("span",{id:"packages-table-heading",className:"packages-table"},s.a.createElement("img",{style:{width:"28px",top:"8px",position:"relative",marginRight:"8px"},alt:"Shows an a packaging box.",src:"/assets/box.png"}),"Package ",a+1),s.a.createElement("span",{className:"packages-table"},s.a.createElement("b",null,(t.distance_current_pickup/1e3).toFixed(2)," ","km"," ")," ","Your location - Pickup"),s.a.createElement("span",{className:"packages-table"},s.a.createElement("b",null,(t.distance_pickup_destination/1e3).toFixed(2)," ","km"," ")," ","Pickup - Destination"),s.a.createElement("span",{className:"packages-table",style:{fontSize:"18px",display:"inline-block"}},s.a.createElement("b",null,(t.distance_pickup_destination/1e3+t.distance_current_pickup/1e3).toFixed(2)," ","km"," ")," ","Combined"),s.a.createElement("span",{style:{float:"right",fontSize:"20px"}},s.a.createElement("b",null," ",t.potential_earning.toFixed(2)," \u20ac ")))}):s.a.createElement("div",{style:{marginBottom:"25px"}},e.state.loading?s.a.createElement("div",{className:"spinner"},s.a.createElement("div",{className:"bounce1"}),s.a.createElement("div",{className:"bounce2"}),s.a.createElement("div",{className:"bounce3"})):s.a.createElement("div",null,"There are no packages available right now. Please check later again."))),s.a.createElement("button",{className:"buttons",onMouseDown:e.ReturnToPreviousPage},"Back"),s.a.createElement("button",{className:"buttons cta-button",onMouseDown:e.ContinueToConfirmPage,style:{float:"right"}},"Continue")):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component));a(31).config();var ee=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).getUserToken=function(){_.a.auth().currentUser&&_.a.auth().currentUser.getIdToken(!0).then(function(e){this.setState({userToken:e},this.getUserPackages)}.bind(Object(C.a)(Object(C.a)(e)))).catch(function(e){})},e.receiveAddress=function(t){e.setState({formattedAddress:t})},e.handleSubmit=function(t){if(0===e.state.currentLatLng.lat&&0===e.state.currentLatLng.lng)window.alert("Please select your location first");else{var a=e.state.radius.match(/\d/g);a=a.join(""),e.props.history.push({pathname:"/driver-select-packages",state:{userToken:e.state.userToken,currentLatLng:e.state.currentLatLng,radius:a,formattedAddress:e.state.formattedAddress}})}},e.getDataFromMaps=function(t){e.setState({currentLatLng:t})},e.state={currentLatLng:{lat:0,lng:0,address:""},radius:0,userToken:null},e.rangeRef=s.a.createRef(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.getUserToken()}},{key:"componentDidMount",value:function(){document.title="Set your location - Package Delivery Marketplace",this.props.location.state?this.setState({userToken:this.props.location.state.userToken,radius:"50 km"}):this.setState({radius:"50 km"})}},{key:"updateRadiusLabel",value:function(e){e.preventDefault(),this.setState({radius:this.rangeRef.current.value+" km"})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"delivery"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{id:"driver-site-div",className:"tile"},s.a.createElement("div",null,s.a.createElement("h2",null,"Want to deliver packages?"),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("span",{style:{marginBottom:"15px",marginTop:"40px",display:"block",fontWeight:600}},"Select your current location"),s.a.createElement(Z,{callbackFromDriver:e.getDataFromMaps,getFormattedAddress:e.receiveAddress,numberOfClicksAllowed:"1"}),s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"How far do you want to deliver?"),s.a.createElement("br",null),s.a.createElement("span",{style:{marginRight:"10px",display:"inline-block",width:"50px"}},e.state.radius),s.a.createElement("input",{type:"range",ref:e.rangeRef,name:"priority",min:"1",max:"50",style:{width:"170px",marginTop:"15px"},onChange:function(t){e.updateRadiusLabel(t)}}))),s.a.createElement("div",{style:{marginTop:"20px"}},s.a.createElement("button",{className:"buttons cta-button",onMouseDown:e.handleSubmit},"Continue"))))):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component)),te=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={selectedPackages:[],timeAvailable:0,currentLatLng:{lat:"",lng:""},waypoints:[],destination:""},e.ReturnToPreviousPage=e.ReturnToPreviousPage.bind(Object(C.a)(Object(C.a)(e))),e.continueToFinalPage=e.continueToFinalPage.bind(Object(C.a)(Object(C.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({selectedPackages:this.props.location.state.selectedPackages,radius:this.props.location.state.prevState.radius,currentLatLng:this.props.location.state.prevState.currentLatLng,userToken:this.props.location.state.userToken,formattedAddress:this.props.location.state.formattedAddress})}},{key:"componentDidMount",value:function(){var e=this;document.title="Confirm your delivery - Package Delivery Marketplace",this.state.selectedPackages.length>0&&this.state.selectedPackages.map(function(t){e.getUserPackages(t.parcel_id)}),this.sendSelectedPackages()}},{key:"ReturnToPreviousPage",value:function(){this.props.history.push({pathname:"/driver-select-packages",state:{selectedPackages:this.state.selectedPackages}})}},{key:"sendSelectedPackages",value:function(){var e=Object(V.a)(J.a.mark(function e(){var t,a;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.state.selectedPackages.map(function(e,a){t.push(e.parcel_id)}),a=JSON.stringify({user_token:this.state.userToken,parcels:t}),e.next=5,G("pd_parcel_selection",a);case 5:e.sent;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getUserPackages",value:function(){var e=Object(V.a)(J.a.mark(function e(t){var a,n;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify({user_token:this.state.userToken,action:"detail",parcel_id:t}),e.next=3,G("parcel",a);case 3:null!==(n=e.sent)?(this.state.waypoints.push({coords:n.data.detail.pickup_location,destination:n.data.detail.destination_location,parcel_id:t,distance_current_pickup:""}),this.setState({destination:n.data.detail.destination_location})):console.log("Error fetching data");case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"continueToFinalPage",value:function(){this.props.history.push({pathname:"/driver-route",state:{selectedPackages:this.state.selectedPackages,currentLatLng:this.state.currentLatLng,userToken:this.state.userToken,waypoints:this.state.waypoints,destination:this.state.destination}})}},{key:"render",value:function(){var e=this;if(this.state.selectedPackages)return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"delivery"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("h2",null,"Congrats! Check your information and submit"),s.a.createElement("div",null,s.a.createElement("p",{style:{marginBottom:"30px"}},s.a.createElement("span",{style:{fontWeight:600}},"Your selected radius is:"),s.a.createElement("br",null),e.state.radius," km"),s.a.createElement("p",{style:{marginBottom:"30x"}},s.a.createElement("span",{style:{fontWeight:600}},"Your current location is:")," ",s.a.createElement("br",null),e.state.formattedAddress," ",s.a.createElement("br",null),e.state.currentLatLng.lat.toFixed(4)," ,"," ",e.state.currentLatLng.lng.toFixed(4)),s.a.createElement("p",null,s.a.createElement("span",{style:{fontWeight:600}},"You selected the following packages to deliver:")),e.state.selectedPackages.map(function(e,t){return s.a.createElement("div",{className:"listed-packages",key:t},s.a.createElement("span",{id:"packages-table-heading",className:"packages-table"},s.a.createElement("img",{style:{width:"28px",top:"8px",position:"relative",marginRight:"8px"},alt:"Shows an a route with multiple waypoints.",src:"/assets/box.png"}),"Package ",t+1),s.a.createElement("span",{className:"packages-table"},s.a.createElement("b",null,(e.distance_current_pickup/1e3).toFixed(2)," ","km"," ")," ","Your location - Pickup"),s.a.createElement("span",{className:"packages-table"},s.a.createElement("b",null,(e.distance_pickup_destination/1e3).toFixed(2)," ","km"," ")," ","Pickup - Destination"),s.a.createElement("span",{className:"packages-table",style:{fontSize:"18px",display:"inline-block"}},s.a.createElement("b",null,(e.distance_pickup_destination/1e3+e.distance_current_pickup/1e3).toFixed(2)," ","km"," ")," ","Combined"),s.a.createElement("span",{style:{float:"right",fontSize:"20px"}},s.a.createElement("b",null," ",e.potential_earning.toFixed(2)," \u20ac ")))})),s.a.createElement("button",{className:"buttons",onMouseDown:e.ReturnToPreviousPage},"Back"),s.a.createElement("button",{className:"buttons cta-button",onMouseDown:e.continueToFinalPage,style:{float:"right"}},"Confirm")):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component)),ae=w(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={userID:null,username:"",email:"",phototURL:null},a.handleChangeUsername=a.handleChangeUsername.bind(Object(C.a)(Object(C.a)(a))),a.handleChangeEmail=a.handleChangeEmail.bind(Object(C.a)(Object(C.a)(a))),a.updateUserData=a.updateUserData.bind(Object(C.a)(Object(C.a)(a))),a.getUserData=a.getUserData.bind(Object(C.a)(Object(C.a)(a))),a.successDiv=s.a.createRef(),a.failDiv=s.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getUserData",value:function(){var e=this.props.firebase.auth.currentUser;null!=e&&this.setState({userID:e.uid,username:e.displayName,email:e.email,photoURL:e.photoURL}),console.log(this.state)}},{key:"updateUserData",value:function(){var e=this.props.firebase.auth.currentUser;null!=e&&(e.updateProfile({displayName:this.state.username}).then(function(){this.successDiv.current.style.display="inherit"}.bind(this)).catch(function(e){this.failDiv.current.style.display="inherit",console.log("Error while changing profile information")}.bind(this)),e.updateEmail(this.state.email).then(function(){this.successDiv.current.style.display="inherit"}.bind(this)).catch(function(e){this.failDiv.current.style.display="inherit",console.log("Error while changing email information")}.bind(this)))}},{key:"handleChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"componentDidMount",value:function(){document.title="Edit Profile - Package Delivery Marketplace",this.getUserData()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"profile"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile",style:{paddingBottom:"5px"}},s.a.createElement("div",{className:"profile-information"},s.a.createElement("h2",null,"Change your profile information"),s.a.createElement("div",{className:"success-div",style:{display:"none"},ref:e.successDiv},"Successfully updated user data."),s.a.createElement("div",{className:"failed-div",style:{display:"none"},ref:e.failDiv},"Failed updating user data."),s.a.createElement("div",null,s.a.createElement("span",{style:{display:"block"}},"Username "),s.a.createElement("input",{type:"text",onChange:e.handleChangeUsername,value:e.state.username?e.state.username:""})),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement("span",{style:{display:"block"}},"Email"),s.a.createElement("input",{type:"text",onChange:e.handleChangeEmail,value:e.state.email?e.state.email:""})),s.a.createElement("button",{className:"buttons cta-button",style:{marginTop:"20px"},onClick:e.updateUserData},"Save"))):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component)),ne=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={userType:"",package:"",response:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({userType:this.props.location.state.userType,package:this.props.location.state.package,success:this.props.location.state.success,response:this.props.location.state.response?this.props.location.state.response:""})}},{key:"render",value:function(){var e=this.state.contentMessage;return!0===this.state.success?e=s.a.createElement("div",null,s.a.createElement("h2",null,"Congrats! Your package was successfully added."),s.a.createElement("div",null,"You can now relax, while we're finding the best driver for your delivery.")):!1===this.state.success&&(e=s.a.createElement("div",null,s.a.createElement("h2",null,"Something went wrong :("),s.a.createElement("div",null,"We're sorry, but your package couldn't be transmitted to our servers. Please check your internet connection an try again."))),s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,null),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile",style:{paddingTop:"24px",textAlign:"center"}},s.a.createElement("img",{style:{width:"150px"},alt:"Shows a route between two points",src:"/assets/distance.png"}),e):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component)),se=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={startLocation:{lat:0,lng:0},destination:{lat:48.558917,lng:9.211809},time:0,userToken:null,selectedPackages:[],waypoints:[],pickedUpClicked:!1},e.pickedUpButton=s.a.createRef(),e.submittedButton=s.a.createRef(),e.mapsRef=s.a.createRef(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){console.log(this.props.location.state),console.log("here"),this.props.location.state&&this.setState({startLocation:this.props.location.state.currentLatLng,userToken:this.props.location.state.userToken,selectedPackages:this.props.location.state.selectedPackages,waypoints:this.props.location.state.waypoints,destination:this.props.location.state.destination})}},{key:"componentDidMount",value:function(){document.title="Your Route - Package Delivery Marketplace"}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"delivery"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("h2",null,"Here's your route!"),s.a.createElement(Z,{allowMultipleClicks:"false",showAutoCompleteBar:"false",startLocation:e.state.startLocation,waypoints:e.state.waypoints,destination:e.state.destination,pickedUpClicked:e.state.pickedUpClicked,userToken:e.state.userToken,calculateRoute:"true"})):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component)),ie=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).showPackageDetail=function(t,a){t.preventDefault(),e.props.history.push({pathname:"/package-details",state:{currentPackageID:a[0],userToken:e.state.userToken}})},e.diffHours=function(e){var t=new Date,a=new Date(e),n=(t.getTime()-a.getTime())/1e3;return n/=3600,Math.abs(Math.round(n))>=24?Math.round(Math.abs(Math.round(n))/24)+" d ago":Math.abs(Math.round(n))+" h ago"},e.sortPackagesByTime=function(){var t=e.state.packages;t.sort(function(e,t){var a=new Date(e[2]),n=new Date(t[2]);return a<n?1:a>n?-1:0}),e.setState({packages:t})},e.state={packages:[],userToken:null,loading:!0},e.getUserPackages=e.getUserPackages.bind(Object(C.a)(Object(C.a)(e))),e.getUserToken=e.getUserToken.bind(Object(C.a)(Object(C.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.getUserToken(),setTimeout(function(){this.setState({loading:!1})}.bind(this),4e3)}},{key:"componentDidMount",value:function(){document.title="My Packages - Package Delivery Marketplace"}},{key:"getUserPackages",value:function(){var e=Object(V.a)(J.a.mark(function e(){var t,a;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify({action:"list",user_token:this.state.userToken,parcel_id:""}),e.next=3,G("parcel",t);case 3:(a=e.sent)?(console.log(a),this.setState({packages:a.data.list,loading:!1}),this.sortPackagesByTime()):(this.setState({loading:!1}),console.log("Error fetching user packages."));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getUserToken",value:function(){_.a.auth().currentUser&&_.a.auth().currentUser.getIdToken(!0).then(function(e){this.setState({userToken:e},this.getUserPackages)}.bind(this)).catch(function(e){})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"package"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("div",{id:"my-packages-container"},s.a.createElement("h2",null,"Manage your packages."),e.state.packages.length?e.state.packages.map(function(t,a){return s.a.createElement("div",{className:"listed-packages parcel-link",key:a,onClick:function(a){return e.showPackageDetail(a,t)}},s.a.createElement("span",{id:"packages-table-heading",className:"packages-table"},s.a.createElement("img",{style:{width:"28px",top:"8px",position:"relative",marginRight:"8px"},alt:"Shows an a packaging box.",src:"/assets/box.png"}),"Package ",a+1),s.a.createElement("span",{className:"packages-table"},t[0]),s.a.createElement("span",{id:"my-packages-status-label",className:"packages-table"},t[1]),s.a.createElement("span",{className:"packages-table",style:{position:"absolute",top:"10px",right:"5px"}},s.a.createElement("img",{style:{width:"20px",top:"4px",position:"relative",marginRight:"8px"},alt:"Shows a clock",src:"/assets/past.png"}),e.diffHours(t[2])))}):s.a.createElement("div",{id:"no-available-div"},e.state.loading?s.a.createElement("div",{className:"spinner"},s.a.createElement("div",{className:"bounce1"}),s.a.createElement("div",{className:"bounce2"}),s.a.createElement("div",{className:"bounce3"})):s.a.createElement("div",null,"No packages available. ",s.a.createElement("br",null),"You can insert a new one by clicking ",s.a.createElement(p.a,{style:{color:"#4e83c5"},to:"/new-package"},"here"),".")),s.a.createElement(p.a,{to:"/new-package"},s.a.createElement("button",{id:"add-package-button",className:"buttons cta-button"},"Add Package")))):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component)),re=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).showPackageDetail=function(t,a){t.preventDefault(),e.props.history.push({pathname:"/package-details",state:{currentPackageID:a,userToken:e.state.userToken}})},e.diffHours=function(e){var t=new Date,a=new Date(e),n=(t.getTime()-a.getTime())/1e3;return n/=3600,Math.abs(Math.round(n))>=24?Math.round(Math.abs(Math.round(n))/24)+" d ago":Math.abs(Math.round(n))+" h ago"},e.state={drives:[],userToken:null,loading:!0},e.getUserDrives=e.getUserDrives.bind(Object(C.a)(Object(C.a)(e))),e.getUserToken=e.getUserToken.bind(Object(C.a)(Object(C.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.getUserToken(),setTimeout(function(){this.setState({loading:!1})}.bind(this),4e3)}},{key:"componentDidMount",value:function(){document.title="My Deliveries - Package Delivery Marketplace"}},{key:"sortDrivesByTime",value:function(){var e=this.state.drives;e.sort(function(e,t){var a=new Date(e.time_created),n=new Date(t.time_created);return a<n?1:a>n?-1:0}),this.setState({drives:e})}},{key:"getUserDrives",value:function(){var e=Object(V.a)(J.a.mark(function e(){var t,a;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify({user_token:this.state.userToken}),e.next=3,G("pd_job_history",t);case 3:null!==(a=e.sent)?(console.log(a),this.setState({drives:a.data.jobs,loading:!1}),this.sortDrivesByTime()):(this.setState({loading:!1}),console.log(a),console.log("Error fetching user drives"));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getUserToken",value:function(){_.a.auth().currentUser&&_.a.auth().currentUser.getIdToken(!0).then(function(e){this.setState({userToken:e},this.getUserDrives)}.bind(this)).catch(function(e){})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"delivery"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("div",{id:"my-packages-container"},s.a.createElement("h2",null,"Manage your deliveries."),e.state.drives.length>0?e.state.drives.map(function(t,a){return s.a.createElement("div",{className:"listed-packages",key:a},s.a.createElement("span",{id:"packages-table-heading",className:"packages-table"},"Job ",a+1),s.a.createElement("div",{className:"packages-table"},t.selected_parcels.map(function(t,a){return s.a.createElement("div",{key:a,onClick:function(a){return e.showPackageDetail(a,t)}},s.a.createElement("img",{style:{width:"24px",top:"8px",position:"relative",marginRight:"8px"},alt:"Shows an a packaging box.",src:"/assets/box.png"}),s.a.createElement("span",{className:"parcel-link",style:{color:"rgb(46, 52, 63)"}},s.a.createElement("b",null," ",t," ")))})),s.a.createElement("span",{className:"packages-table",style:{position:"absolute",top:"10px",right:"5px"}},s.a.createElement("img",{style:{width:"20px",top:"4px",position:"relative",marginRight:"8px"},alt:"Shows an a packaging box.",src:"/assets/past.png"}),e.diffHours(t.time_created)))}):s.a.createElement("div",{id:"no-available-div"},e.state.loading?s.a.createElement("div",{className:"spinner"},s.a.createElement("div",{className:"bounce1"}),s.a.createElement("div",{className:"bounce2"}),s.a.createElement("div",{className:"bounce3"})):s.a.createElement("div",null,"No deliveries available."," ",s.a.createElement("br",null),"You can start a new one by clicking"," ",s.a.createElement(p.a,{style:{color:"#4e83c5"},to:"/driver"},"here"),".")),s.a.createElement(p.a,{to:"/driver"},s.a.createElement("button",{id:"add-package-button",className:"buttons cta-button"},"Add Delivery")))):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component)),le=w(function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={drivers:[{id:1,name:"Alfredo",rating:88},{id:2,name:"Jimmy M.",rating:402},{id:3,name:"Benjamas",rating:1020}]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.title="Ratings - Package Delivery Marketplace"}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"profile"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("h2",null,"Ratings"),s.a.createElement("h4",null,"This page shows all driver with their current rating."),e.state.drivers.map(function(e,t){return s.a.createElement("div",{key:t,className:"ratings-div"},e.rating,", ",e.name)})):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component)),oe=w(function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={userToken:"",packageID:"",detailsObj:{},detailsArr:[],loading:!0,package:null},e.getUserPackages=e.getUserPackages.bind(Object(C.a)(Object(C.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({packageID:this.props.location.state.currentPackageID,userToken:this.props.location.state.userToken})}},{key:"componentDidMount",value:function(){document.title="Package Details - Package Delivery Marketplace",this.getUserPackages(),setTimeout(function(){this.setState({loading:!1})}.bind(this),1700)}},{key:"createArrOfObj",value:function(e){if(e){var t=Object.keys(e).map(function(t){return[t,e[t]]});console.log(t),this.setState({detailsArr:t})}console.log(this.state)}},{key:"getUserPackages",value:function(){var e=Object(V.a)(J.a.mark(function e(){var t,a;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.state.userToken),t=JSON.stringify({user_token:this.state.userToken,action:"detail",parcel_id:this.state.packageID}),console.log(t),e.next=5,G("parcel",t);case 5:(a=e.sent)?(this.setState({loading:!1,package:a.data.detail}),this.createArrOfObj(a.data.detail)):(this.setState({loading:!1}),console.log("Error fetching package data."));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(P,{currentPage:"package"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(y.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("div",{id:"my-packages-container"},s.a.createElement("h2",null,"View your package"),s.a.createElement("img",{style:{width:"100px"},alt:"Shows an icon of a package",src:"/assets/packing.png"}),e.state.detailsArr.length>0?e.state.detailsArr.map(function(e,t){return s.a.createElement("div",{key:t},s.a.createElement("div",{className:"package-detail-attribute"},e[0],":"),s.a.createElement("div",null,"object"===typeof e[1]?e[1].lat.toFixed(5)+", "+e[1].lng.toFixed(5):e[1]))}):s.a.createElement("div",null,e.state.loading?s.a.createElement("div",{className:"spinner"},s.a.createElement("div",{className:"bounce1"}),s.a.createElement("div",{className:"bounce2"}),s.a.createElement("div",{className:"bounce3"})):s.a.createElement("div",null,"Package information are currently unavailable. Please check later again.")))):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component)),ce=a(185),ue=a(186),me=a(184);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(31).load(),r.a.render(s.a.createElement(h.Provider,{value:new b},s.a.createElement(ce.a,null,s.a.createElement(ue.a,null,s.a.createElement(me.a,{exact:!0,path:"/",component:N}),s.a.createElement(me.a,{exact:!0,path:"/login",component:B}),s.a.createElement(me.a,{exact:!0,path:"/signup",component:R}),s.a.createElement(me.a,{exact:!0,path:"/profile",component:z}),s.a.createElement(me.a,{exact:!0,path:"/ratings",component:le}),s.a.createElement(me.a,{exact:!0,path:"/profile-edit",component:ae}),s.a.createElement(me.a,{exact:!0,path:"/new-package",component:$}),s.a.createElement(me.a,{exact:!0,path:"/packages",component:ie}),s.a.createElement(me.a,{exact:!0,path:"/package-details",component:oe}),s.a.createElement(me.a,{exact:!0,path:"/drives",component:re}),s.a.createElement(me.a,{exact:!0,path:"/driver-select-packages",component:q}),s.a.createElement(me.a,{exact:!0,path:"/driver",component:ee}),s.a.createElement(me.a,{exact:!0,path:"/driver-confirm",component:te}),s.a.createElement(me.a,{exact:!0,path:"/driver-route",component:se}),s.a.createElement(me.a,{exact:!0,path:"/final",component:ne})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},91:function(e,t,a){e.exports=a(181)},96:function(e,t,a){}},[[91,2,1]]]);
//# sourceMappingURL=main.8e139b78.chunk.js.map