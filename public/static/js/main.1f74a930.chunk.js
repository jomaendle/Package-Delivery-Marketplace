(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(85),i=a.n(l),r=(a(94),a(4)),o=a(5),c=a(7),u=a(6),m=a(8),p=(a(10),a(179)),d=s.a.createContext(null),h=function(e){return function(t){return s.a.createElement(d.Consumer,null,function(a){return s.a.createElement(e,Object.assign({},t,{firebase:a}))})}},g=d,f=a(25),v=a.n(f);a(144);a(17).config();var b={apiKey:"AIzaSyDM3QLzPgBQhSX7gfx16imFoCFm3j_B1pM",authDomain:"studienarbeit.firebaseapp.com",databaseURL:"https://studienarbeit.firebaseio.com",projectId:"studienarbeit",storageBucket:"studienarbeit.appspot.com",messagingSenderId:"292162895758"},E=function e(){var t=this;Object(r.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},v.a.initializeApp(b),this.auth=v.a.auth()},y=h(function(e){var t=e.firebase;return s.a.createElement(p.a,{className:"navigation-links",to:"/"},s.a.createElement("span",{id:"signout-label",onClick:t.doSignOut},"Sign Out"))}),k=s.a.createContext(null),P=function(e){var t=function(t){function a(e){var t;return Object(r.a)(this,a),(t=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={authUser:null},t}return Object(m.a)(a,t),Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged(function(t){t?e.setState({authUser:t}):e.setState({authUser:null})})}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return s.a.createElement(k.Provider,{value:this.state.authUser},s.a.createElement(e,this.props))}}]),a}(s.a.Component);return h(t)},w=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={currentPage:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.setState({currentPage:this.props.currentPage})}},{key:"render",value:function(){var e=this,t=function(t){return s.a.createElement("div",null,s.a.createElement("ul",{id:"navigation-bar"},s.a.createElement("li",null,"home"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/"}," Home "):s.a.createElement(p.a,{className:"navigation-links",to:"/"}," Home ")),s.a.createElement("li",null,"profile"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/profile"}," Profile "):s.a.createElement(p.a,{className:"navigation-links",to:"/profile"}," Profile ")),s.a.createElement("li",null,"package"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/packages"}," My Packages "):s.a.createElement(p.a,{className:"navigation-links",to:"/packages"}," My Packages ")),s.a.createElement("li",null,"delivery"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/driver"},"Delivery "):s.a.createElement(p.a,{className:"navigation-links",to:"/driver"}," Delivery ")),s.a.createElement("li",null,s.a.createElement(y,null))))},a=function(){return s.a.createElement("div",null,s.a.createElement("ul",{id:"navigation-bar"},s.a.createElement("li",null,"home"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/"}," Home "):s.a.createElement(p.a,{className:"navigation-links",to:"/"}," Home ")),s.a.createElement("li",null,"login"===e.state.currentPage?s.a.createElement(p.a,{className:"navigation-links",style:{borderBottom:"solid",paddingBottom:"3px"},to:"/login"}," Sign In "):s.a.createElement(p.a,{className:"navigation-links",to:"/login"}," Sign In "))))};return s.a.createElement("div",null,s.a.createElement(k.Consumer,null,function(n){return n?s.a.createElement(t,{currentPage:e.state.currentPage}):s.a.createElement(a,{currentPage:e.state.currentPage})}))}}]),t}(s.a.Component),O=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"Header"},s.a.createElement("h2",{id:"Header-label"}," Package Delivery Marketplace "))}}]),t}(n.Component),j=P(function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this)))._username=null,e._iconSize="60px",e._iconMarginRight="30px",e.state={userToken:null,username:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({userToken:this.props.location.state.userToken})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,{currentPage:"home"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(k.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("div",{style:{display:"none"}},e._username?"":e._username=t.displayName),s.a.createElement("h2",{style:{paddingLeft:"10px"}},"Hello ",e._username?e._username+",":"User,"),s.a.createElement("p",{className:"home-text",style:{marginTop:"-10px"}},"On this place, you can either insert packages with a need to deliver or delivering packages on your own.",s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("img",{style:{width:e._iconSize,float:"left",marginRight:e._iconMarginRight},alt:"Shows an icon of a person",src:"/assets/packing.png"}),"If you go to"," ",s.a.createElement(p.a,{style:{color:"#4e83c5",fontFamily:"'Muli', sans-serif"},to:"/packages"},"Packages"),", you can view your current packages or add new ones."),s.a.createElement("p",{className:"home-text"},s.a.createElement("img",{style:{width:e._iconSize,float:"left",marginRight:e._iconMarginRight},alt:"Shows an icon of a person",src:"/assets/transport.png"}),"On the"," ",s.a.createElement(p.a,{style:{color:"#4e83c5",fontFamily:"'Muli', sans-serif"},to:"/driver"},"Delivery")," ","page, you can view your past drives or start a new delivery."),s.a.createElement("p",{className:"home-text"},s.a.createElement("img",{style:{width:e._iconSize,float:"left",marginRight:e._iconMarginRight},alt:"Shows an icon of a person",src:"/assets/man.png"}),"On the"," ",s.a.createElement(p.a,{style:{color:"#4e83c5",fontFamily:"'Muli', sans-serif"},to:"/profile"},"Profile")," ","page, you can see your information and your current rating basend of your deliveries.")):s.a.createElement("div",{className:"tile"},s.a.createElement("div",{className:"userNotLoggedIn-label"},"Welcome to the Package Delivery Marketplace PDM."))})))}}]),t}(n.Component)),N=a(29),S=a(37),C=a(183),L=a(49),x={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},T=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).onSubmit=function(e){var t=a.state,n=(t.username,t.email),s=t.passwordOne;a.props.firebase.doCreateUserWithEmailAndPassword(n,s).then(function(e){a.setState(Object(S.a)({},x)),a.props.history.push("/signup")}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,l=e.passwordTwo,i=e.error;return s.a.createElement("div",null,s.a.createElement(O,null),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),s.a.createElement("input",{name:"email",value:a,onChange:this.onChange,type:"text",placeholder:"Email Address"}),s.a.createElement("input",{name:"passwordOne",value:n,onChange:this.onChange,type:"password",placeholder:"Password"}),s.a.createElement("input",{name:"passwordTwo",value:l,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),s.a.createElement("button",{type:"submit"},"Sign Up"),i&&s.a.createElement("p",null,i.message)))}}]),t}(n.Component),D=function(){return s.a.createElement("p",null,"Don't have an account? ",s.a.createElement(p.a,{to:"/signup"},"Sign Up"))},A=Object(L.a)(C.a,h)(T),R=function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"SignUp"),s.a.createElement(A,null))},M=a(39),U=a.n(M),I={email:"",password:"",error:null},W=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state,n=t.email,s=t.password;a.props.firebase.doSignInWithEmailAndPassword(n,s).then(function(){var e;a.setState(Object(S.a)({},I)),U.a.auth().currentUser.getIdToken(!0).then(function(t){e=t,console.log(t)}).catch(function(e){}),a.props.history.push({pathname:"/",state:{userToken:e}})}).catch(function(e){a.setState({error:e})}),e.preventDefault()},a.onChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.state=Object(S.a)({},I),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,l=""===a||""===t;return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"main-content"},s.a.createElement("div",{className:"tile"},s.a.createElement("h1",{style:{textAlign:"center",marginBottom:"40px"}},"Sign In"),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",style:{width:"230px",display:"block",margin:"0 auto"},placeholder:"Email Address"}),s.a.createElement("br",null),s.a.createElement("input",{name:"password",value:a,onChange:this.onChange,style:{width:"230px",display:"block",margin:"0 auto"},type:"password",placeholder:"Password"}),s.a.createElement("br",null),s.a.createElement("button",{className:"buttons",disabled:l,type:"submit",style:{display:"block",margin:"0 auto"}},"Sign In"),n&&s.a.createElement("p",null,n.message)))))}}]),t}(n.Component),_=Object(L.a)(C.a,h)(W),B=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,null),s.a.createElement(_,null),s.a.createElement(D,null))},F=P(function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={userID:null,username:"",email:"",phototURL:null},a.usernameLabel=s.a.createRef(),a.emailLabel=s.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getUserData",value:function(){var e=this.props.firebase.auth.currentUser;null!=e&&this.setState({userID:e.uid,username:e.displayName,email:e.email,photoURL:e.photoURL})}},{key:"componentDidMount",value:function(){this.getUserData()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,{currentPage:"profile"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(k.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile",style:{height:"300px"}},s.a.createElement("div",{className:"profile-information"},s.a.createElement("h2",{ref:e.usernameLabel},e.state.username?e.state.username:"Username"),s.a.createElement("img",{style:{width:"70px",position:"absolute",right:"40px",top:"50px"},alt:"Shows an icon of a person",src:"/assets/avatar.png"})),s.a.createElement("div",{className:"profile-information"},s.a.createElement("span",{ref:e.emailLabel},"Email: ",e.state.email)),s.a.createElement(p.a,{to:"/profile-edit"},s.a.createElement("button",{className:"buttons cta-button",style:{float:"right",marginRight:"10px",bottom:"-145px",position:"relative"}},"Edit Profile"))):s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page.")})))}}]),t}(n.Component)),H=a(3),z=a(30),K=a.n(z),V=a(88),J=a.n(V);a(17).config();var Y=P(function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={startLocation:{lat:null,lng:null},destination:{lat:null,lng:null},googleAPIKey:"AIzaSyAjSJ2TYee4PxkeUwH-nvWTIO4MU9NEKrg",currentLatLng:{lat:null,lng:null},directionsService:null,directionsDisplay:null,place:null,mapPositionArray:[],allowMultipleClicks:!0,showAutoCompleteBar:!0,duration:"",distance:"",scriptLoaded:!1,coordinates:{lat:48.78232,lng:9.17702}},e.initAutocomplete=e.initAutocomplete.bind(Object(H.a)(Object(H.a)(e))),e.initMap=e.initMap.bind(Object(H.a)(Object(H.a)(e))),e.calculateAndDisplayRoute=e.calculateAndDisplayRoute.bind(Object(H.a)(Object(H.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){"false"===this.props.allowMultipleClicks&&this.setState({allowMultipleClicks:!1}),"false"===this.props.showAutoCompleteBar&&this.setState({showAutoCompleteBar:!1}),this.props.startLocation&&this.setState({startLocation:this.props.startLocation,destination:this.props.destination})}},{key:"componentDidMount",value:function(){this._isMounted=!0,"true"===this.props.calculateRoute&&setTimeout(function(){this.calculateAndDisplayRoute()}.bind(this),250)}},{key:"initMap",value:function(){this.geocoder=new google.maps.Geocoder,this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:this.state.coordinates.lat,lng:this.state.coordinates.lng},zoom:10}),google.maps.event.addListener(this.map,"click",function(e){this.state.allowMultipleClicks&&this.addInfoWindowForLocation(e,this.geocoder)}.bind(this)),this.setState({directionsService:new google.maps.DirectionsService,directionsDisplay:new google.maps.DirectionsRenderer({map:this.map})}),this.state.showAutoCompleteBar&&this.initAutocomplete(this.geocoder)}},{key:"calculateAndDisplayRoute",value:function(){this.state.directionsService&&this.state.directionsDisplay&&(this.state.directionsDisplay.setMap(null),this.state.directionsDisplay.setMap(this.map),this.state.directionsService.route({origin:this.state.startLocation,destination:this.state.destination,travelMode:google.maps.TravelMode.DRIVING,provideRouteAlternatives:!0},function(e,t){if(t===google.maps.DirectionsStatus.OK){this.state.directionsDisplay.setDirections(e);for(var a=0,n=0,s=this.state.directionsDisplay.directions,l=0;l<s.routes[0].legs.length;l++)n+=s.routes[0].legs[l].distance.value,a+=s.routes[0].legs[l].duration.value;var i=n/1e3;i=i.toFixed(1);var r=new Date(null);r.setSeconds(a);var o=0;o=a<3600?r.toISOString().substr(14,5):r.toISOString().substr(11,8),this.setState({duration:o,distance:i+" km"})}else window.alert("Directions request failed due to "+t)}.bind(this)))}},{key:"initAutocomplete",value:function(e){if(this.map){var t=document.getElementById("searchTextField"),a=(new google.maps.Marker({map:this.map}),new google.maps.places.Autocomplete(t));a.bindTo("bounds",this.map),google.maps.event.addListener(a,"place_changed",function(){this.place=a.getPlace();var t=new google.maps.LatLng(this.place.geometry.location.lat(),this.place.geometry.location.lng());this.map.setCenter(t),this.checkIfInfoWindowIsReached(),this.createNewInfoWindow(this.place.geometry.location.lat(),this.place.geometry.location.lng(),e),this.props.callbackFromDriver?this.props.callbackFromDriver({lat:this.place.geometry.location.lat(),lng:this.place.geometry.location.lng()}):this.props.callbackFromParent&&this.props.callbackFromParent(this.state.coordinates),this.map.setZoom(11)}.bind(this))}}},{key:"addInfoWindowForLocation",value:function(e,t){for(var a,n=0;n<this.state.mapPositionArray.length;n++)this.state.mapPositionArray[n].lat===e.latLng.lat()&&this.state.mapPositionArray[n].lon===e.latLng.lng()&&(a=this.state.mapPositionArray[n].infoWindow),this.state.mapPositionArray[n].infoWindow&&this.state.mapPositionArray[n].infoWindow.close();this.checkIfInfoWindowIsReached(),a||this.createNewInfoWindow(e.latLng.lat(),e.latLng.lng(),t),this.props.callbackFromParent(this.state.mapPositionArray)}},{key:"checkIfInfoWindowIsReached",value:function(){if(this.state.mapPositionArray.length>1){for(var e=0;e<this.state.mapPositionArray.length;e++)this.state.mapPositionArray[e].marker.setMap(null);this.setState({mapPositionArray:[]})}console.log(this.state.mapPositionArray)}},{key:"createNewInfoWindow",value:function(e,t,a){var n,s,l={lat:e,lng:t},i={lat:e,lon:t,infoWindow:new google.maps.InfoWindow,marker:new google.maps.Marker({position:l,map:this.map})},r=this.state.mapPositionArray;r.push(i),this.setState({mapPositionArray:r}),n=i.infoWindow,s=i.marker,this.geocodeLatLng(a,this.map,n,l,s)}},{key:"geocodeLatLng",value:function(e,t,a,n,s){var l={lat:n.lat,lng:n.lng};e.geocode({location:l},function(e,n){"OK"===n?e[0]?(s.addListener("click",function(){a.open(t,s)}),this.formatted_address=e[0].formatted_address,a.setContent(e[0].formatted_address),a.open(t,s)):window.alert("No results found"):window.alert("Geocoder failed due to: "+n)})}},{key:"render",value:function(){var e="https://maps.googleapis.com/maps/api/js?libraries=places&key="+this.state.googleAPIKey;return s.a.createElement("div",null,this.state.showAutoCompleteBar?s.a.createElement("input",{type:"text",id:"searchTextField"}):"",s.a.createElement("div",{id:"map"}),s.a.createElement("div",null,this.props.calculateRoute?s.a.createElement("div",null,s.a.createElement("p",{ref:this.distanceLabel},"Distance: ",this.state.distance),s.a.createElement("p",{ref:this.durationLabel},"Duration: ",this.state.duration)):""),s.a.createElement(J.a,{url:e,onLoad:this.initMap.bind(this)}))}}]),t}(n.Component));a(17).config();var G=P(function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).getDataFromMaps=function(t){e.setState({mapPositionArray:t})},e.handleSubmit=function(t){if(t.preventDefault(),2===e.state.mapPositionArray.length){var a=e.sizeRef.current.value,n=e.weightRef.current.value,s=e.rangeRef.current.value,l=e.commentRef.current.value,i=e.priceRef.current.value,r=e.state.userToken;console.log(r);var o={lat:e.state.mapPositionArray[0].lat,lng:e.state.mapPositionArray[0].lon},c={lat:e.state.mapPositionArray[1].lat,lng:e.state.mapPositionArray[1].lon},u=JSON.stringify({action:"submit",user_token:r,price:i,size:a,weight:n,priority:s,comment:l,pickup_location:o,destination_location:c});console.log(u),K.a.post("https://us-central1-studienarbeit.cloudfunctions.net/parcel",u,{headers:{"Content-Type":"application/json"}}).then(function(e){console.log(e)}).catch(function(e){console.log(o,c),console.log(e)}),e.continueToFinalPage(u,void 0)}else alert("Please select the start and final destination of the package. ")},e.state={startLocation:{lat:null,lng:null},destination:{lat:null,lng:null},showSecondMarker:!1,mapPositionArray:[],priority:"",price:"",userToken:null},e.clearValues=e.clearValues.bind(Object(H.a)(Object(H.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(H.a)(Object(H.a)(e))),e.continueToFinalPage=e.continueToFinalPage.bind(Object(H.a)(Object(H.a)(e))),e.getUserToken=e.getUserToken.bind(Object(H.a)(Object(H.a)(e))),e.rangeRef=s.a.createRef(),e.sizeRef=s.a.createRef(),e.weightRef=s.a.createRef(),e.commentRef=s.a.createRef(),e.priceRef=s.a.createRef(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.getUserToken()}},{key:"componentDidMount",value:function(){this.setState({priority:"Priority: Very High",price:"Price: 50\u20ac"})}},{key:"clearValues",value:function(){this.setState({startLocation:{lat:null,lng:null},destination:{lat:null,lng:null}})}},{key:"getUserToken",value:function(){v.a.auth().currentUser&&v.a.auth().currentUser.getIdToken(!0).then(function(e){this.setState({userToken:e})}.bind(this)).catch(function(e){})}},{key:"redirectToCompletePage",value:function(){this.props.history.push({pathname:"/driver",state:{currentLatLng:this.state.currentLatLng}})}},{key:"updatePriorityLabel",value:function(e){e.preventDefault();var t="";switch(this.rangeRef.current.value){case"1":t="Very low";break;case"2":t="Low";break;case"3":t="Normal";break;case"4":t="High";break;case"5":t="Very High";break;default:t=""}this.setState({priority:"Priority: "+t})}},{key:"updatePriceLabel",value:function(e){e.preventDefault(),this.setState({price:"Price: "+this.priceRef.current.value+"\u20ac"})}},{key:"continueToFinalPage",value:function(e,t){this.props.history.push({pathname:"/final",state:{userType:"customer",package:e,response:t}})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,{currentPage:"package"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(k.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile",style:{padding:"20px 50px"}},s.a.createElement("h2",null,"Insert a new package to the marketplace"),s.a.createElement("div",null,s.a.createElement(Y,{callbackFromParent:e.getDataFromMaps}),s.a.createElement("form",{onSubmit:e.handleSubmit},s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"What's the size of your package?"),s.a.createElement("select",{name:"size",ref:e.sizeRef,className:"package-insert-select"},s.a.createElement("option",{value:"S"},"S (35 x 25 x 10 cm)"),s.a.createElement("option",{value:"M"},"M (60 x 30 x 15 cm)"),s.a.createElement("option",{value:"L"},"L (120 x 60 x 60 cm)"))),s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"How heavy is it?"),s.a.createElement("select",{name:"weight",ref:e.weightRef,className:"package-insert-select"},s.a.createElement("option",{value:"light"},"Up to 2 Kg"),s.a.createElement("option",{value:"medium"},"Up to 5 Kg"),s.a.createElement("option",{value:"heavy"},"Up to 10 Kg"))),s.a.createElement("div",{style:{marginTop:"10px"}},s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"What priority should it have?")," ",s.a.createElement("br",null),s.a.createElement("span",{style:{marginRight:"20px",display:"inline-block",width:"135px"}},e.state.priority),s.a.createElement("input",{type:"range",ref:e.rangeRef,name:"priority",min:"1",max:"5",style:{width:"250px"},onChange:function(t){e.updatePriorityLabel(t)}})),s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"Whats your maximum price?")," ",s.a.createElement("br",null),s.a.createElement("span",{style:{marginRight:"20px",display:"inline-block",width:"135px"}},e.state.price),s.a.createElement("input",{type:"range",ref:e.priceRef,name:"price",min:"1",max:"100",style:{width:"250px"},onChange:function(t){e.updatePriceLabel(t)}}))),s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"Any Comments?"),s.a.createElement("textarea",{id:"package-comment",name:"comment",className:"package-insert-select",ref:e.commentRef})),s.a.createElement("div",{id:"selected-locations"},s.a.createElement("div",{className:"speech-bubble"}),s.a.createElement("div",{style:{lineHeight:"19px"}},s.a.createElement("span",{style:{fontWeight:600}},"Start Location")," ",s.a.createElement("br",null),e.state.startLocation.lat?e.state.startLocation.lat.toFixed(3):"0",","," ",e.state.startLocation.lng?e.state.startLocation.lng.toFixed(3):"0"),s.a.createElement("br",null),s.a.createElement("div",{style:{lineHeight:"19px"}},s.a.createElement("span",{style:{fontWeight:600}}," Destination ")," ",s.a.createElement("br",null),e.state.destination.lat?e.state.destination.lat.toFixed(3):"0",","," ",e.state.destination.lng?e.state.destination.lng.toFixed(3):"0")),s.a.createElement("div",{style:{marginTop:"20px"}},s.a.createElement("button",{className:"buttons critical-button",onMouseDown:e.clearValues},"Clear Values"),s.a.createElement("input",{className:"buttons cta-button",type:"submit",style:{float:"right"},value:"Submit"}))))):s.a.createElement("div",null,s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component));a(17).config();var q=P(function(e){function t(){var e;Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handlePackageClick=function(t){var a,n=t.target.querySelectorAll("span"),s=[];n.forEach(function(e){s.push(e.innerHTML)}),e.state.selectedPackages&&(e.state.selectedPackages.includes(s[0].innerHTML)||s===[])||(a={parcel_id:s[0],parcel_status:s[1],title:s[2],time_created:s[3]},e.state.selectedPackages.push(a),t.target.className="listed-packages-clicked")},e.state={packages:[{parcel_id:1,parcel_status:"home",title:"P1",time_created:"Tue, 22 Jan 2019 05:42:10 GMT"},{parcel_id:2,parcel_status:"home",title:"P2",time_created:"Tue, 22 Jan 2019 08:22:10 GMT"}],selectedPackages:[],userToken:null},e.handlePackageClick=e.handlePackageClick.bind(Object(H.a)(Object(H.a)(e))),e.ReturnToPreviousPage=e.ReturnToPreviousPage.bind(Object(H.a)(Object(H.a)(e))),e.ContinueToConfirmPage=e.ContinueToConfirmPage.bind(Object(H.a)(Object(H.a)(e)));return e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){K.a.get("https://us-central1-studienarbeit.cloudfunctions.net/parceldriver",{params:{driver_position:"test",radius:""}}).then(function(e){console.log(e)}).catch(function(e){console.log(e)}),this.props.location.state&&this.setState({userToken:this.props.location.state.userToken})}},{key:"ReturnToPreviousPage",value:function(){this.props.history.push({pathname:"/driver",state:{currentLatLng:this.state.currentLatLng}})}},{key:"ContinueToConfirmPage",value:function(){0===this.state.selectedPackages.length?alert("Select at least one package"):this.props.history.push({pathname:"/driver-confirm",state:{prevState:this.props.location.state,selectedPackages:this.state.selectedPackages}})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,{currentPage:"delivery"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(k.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("h2",null,"Select one or more packages to proceed."),s.a.createElement("div",null,0!==e.state.packages.length?e.state.packages.map(function(t,a){return s.a.createElement("div",{className:"listed-packages",key:a,onMouseDown:e.handlePackageClick},s.a.createElement("span",{className:"packages-table"},t.parcel_id),s.a.createElement("span",{className:"packages-table"},t.parcel_status),s.a.createElement("span",{className:"packages-table"},t.title),s.a.createElement("span",{className:"packages-table"},t.time_created))}):s.a.createElement("div",{style:{marginBottom:"25px"}},"There are no packages available right now. Please check later again.")),s.a.createElement("button",{className:"buttons",onMouseDown:e.ReturnToPreviousPage},"Back"),s.a.createElement("button",{className:"buttons cta-button",onMouseDown:e.ContinueToConfirmPage,style:{float:"right"}},"Continue")):s.a.createElement("div",null,s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component));a(17).config();var Q=P(function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleSubmit=function(t){0===e.state.currentLatLng.lat&&0===e.state.currentLatLng.lng?window.alert("Please select your location first"):e.props.history.push({pathname:"/driver-select-packages",state:{currentLatLng:e.state.currentLatLng,timeAvailable:e.state.time}})},e.getDataFromMaps=function(t){console.log("received: "+t),e.setState({currentLatLng:t})},e.state={currentLatLng:{lat:0,lng:0,address:""},time:0,userToken:null},e.rangeRef=s.a.createRef(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({userToken:this.props.location.state.userToken})}},{key:"componentDidMount",value:function(){this.props.location.state?this.setState({userToken:this.props.location.state.userToken,time:"Hours: 5"}):this.setState({time:"Hours: 5"})}},{key:"updateTimeLabel",value:function(e){e.preventDefault(),this.setState({time:"Hours: "+this.rangeRef.current.value})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,{currentPage:"delivery"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(k.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile",style:{padding:"20px 50px"}},s.a.createElement("div",null,s.a.createElement("h2",null,"Want to deliver packages?"),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("span",{style:{marginBottom:"15px",marginTop:"40px",display:"block",fontWeight:600}},"Select your current location"),s.a.createElement(Y,{callbackFromDriver:e.getDataFromMaps,allowMultipleClicks:"false",showAutoCompleteBar:"true"}),s.a.createElement("p",{className:"p-border"},s.a.createElement("span",{style:{fontWeight:600}},"How much time do you have for delivering?"),s.a.createElement("br",null),s.a.createElement("span",{style:{marginRight:"15px"}},e.state.time),s.a.createElement("input",{type:"range",ref:e.rangeRef,name:"priority",min:"1",max:"5",style:{width:"250px",marginTop:"15px"},onChange:function(t){e.updateTimeLabel(t)}}))),s.a.createElement("div",{style:{marginTop:"20px"}},s.a.createElement("button",{className:"buttons cta-button",onMouseDown:e.handleSubmit},"Continue"))))):s.a.createElement("div",null,s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))})))}}]),t}(n.Component));a(17).config();var X=P(function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={selectedPackages:[],timeAvailable:0,currentLatLng:{lat:"",lng:""}},e.ReturnToPreviousPage=e.ReturnToPreviousPage.bind(Object(H.a)(Object(H.a)(e))),e.continueToFinalPage=e.continueToFinalPage.bind(Object(H.a)(Object(H.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({selectedPackages:this.props.location.state.selectedPackages,timeAvailable:this.props.location.state.prevState.timeAvailable,currentLatLng:this.props.location.state.prevState.currentLatLng})}},{key:"ReturnToPreviousPage",value:function(){this.props.history.push({pathname:"/driver-select-packages",state:{selectedPackages:this.state.selectedPackages}})}},{key:"continueToFinalPage",value:function(){this.props.history.push({pathname:"/driver-route",state:{userType:"driver"}})}},{key:"render",value:function(){var e=this;return this.state.selectedPackages?s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,{currentPage:"delivery"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(k.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("h2",null,"Congrats! Check your information and submit"),s.a.createElement("div",null,s.a.createElement("p",{style:{marginBottom:"45px"}},s.a.createElement("span",{style:{fontWeight:600}},"Your available time level is:")," ",e.state.timeAvailable),s.a.createElement("p",{style:{marginBottom:"45px"}},s.a.createElement("span",{style:{fontWeight:600}},"Your current position is:")," ",e.state.currentLatLng.address," ",s.a.createElement("br",null),e.state.currentLatLng.lat.toFixed(4)," ,"," ",e.state.currentLatLng.lng.toFixed(4)),s.a.createElement("p",null,s.a.createElement("span",{style:{fontWeight:600}},"You selected the following packages to deliver:")),e.state.selectedPackages.map(function(t,a){return s.a.createElement("div",{className:"listed-packages",key:a,onMouseDown:e.handlePackageClick},s.a.createElement("span",{className:"packages-table"},t.parcel_id),s.a.createElement("span",{className:"packages-table"},t.parcel_status),s.a.createElement("span",{className:"packages-table"},t.title),s.a.createElement("span",{className:"packages-table"},t.time_created))})),s.a.createElement("button",{className:"buttons",onMouseDown:e.ReturnToPreviousPage},"Back"),s.a.createElement("button",{className:"buttons cta-button",onMouseDown:e.continueToFinalPage,style:{float:"right"}},"Confirm")):s.a.createElement("div",null,s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page."))}))):s.a.createElement("div",null,s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,null),s.a.createElement("div",{className:"main-content"},s.a.createElement("h3",null,"Congrats! Check your information and submit"),s.a.createElement("h4",null),s.a.createElement("div",null),s.a.createElement("button",{className:"buttons",onMouseDown:this.ReturnToPreviousPage},"Back"),s.a.createElement("button",{className:"buttons",style:{float:"right"}},"Submit"))))}}]),t}(n.Component)),Z=P(function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={userID:null,username:"",email:"",phototURL:null},a.handleChangeUsername=a.handleChangeUsername.bind(Object(H.a)(Object(H.a)(a))),a.handleChangeEmail=a.handleChangeEmail.bind(Object(H.a)(Object(H.a)(a))),a.updateUserData=a.updateUserData.bind(Object(H.a)(Object(H.a)(a))),a.getUserData=a.getUserData.bind(Object(H.a)(Object(H.a)(a))),a.successDiv=s.a.createRef(),a.failDiv=s.a.createRef(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getUserData",value:function(){var e=this.props.firebase.auth.currentUser;console.log(e),null!=e&&this.setState({userID:e.uid,username:e.displayName,email:e.email,photoURL:e.photoURL}),console.log(this.state)}},{key:"updateUserData",value:function(){var e=this.props.firebase.auth.currentUser;null!=e&&(e.updateProfile({displayName:this.state.username}).then(function(){this.successDiv.current.style.display="inherit"}.bind(this)).catch(function(e){this.failDiv.current.style.display="inherit",console.log("Error while changing profile information")}.bind(this)),e.updateEmail(this.state.email).then(function(){this.successDiv.current.style.display="inherit"}.bind(this)).catch(function(e){this.failDiv.current.style.display="inherit",console.log("Error while changing email information")}.bind(this)))}},{key:"handleChangeUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"componentDidMount",value:function(){this.getUserData()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,null),s.a.createElement("div",{className:"main-content"},s.a.createElement(k.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile",style:{paddingBottom:"5px"}},s.a.createElement("div",{className:"profile-information"},s.a.createElement("h2",null,"Change your profile information"),s.a.createElement("div",{className:"success-div",style:{display:"none"},ref:e.successDiv},"Successfully updated user data."),s.a.createElement("div",{className:"failed-div",style:{display:"none"},ref:e.failDiv},"Failed updating user data."),s.a.createElement("div",null,s.a.createElement("span",{style:{display:"block"}},"Username "),s.a.createElement("input",{type:"text",onChange:e.handleChangeUsername,value:e.state.username?e.state.username:""})),s.a.createElement("br",null),s.a.createElement("div",null,s.a.createElement("span",{style:{display:"block"}},"Email"),s.a.createElement("input",{type:"text",onChange:e.handleChangeEmail,value:e.state.email?e.state.email:""})),s.a.createElement("button",{className:"buttons cta-button",style:{marginTop:"20px"},onClick:e.updateUserData},"Save"))):s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page.")})))}}]),t}(n.Component)),$=P(function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={userType:"",package:"",response:""},e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({userType:this.props.location.state.userType,package:this.props.location.state.package,response:this.props.location.state.response?this.props.location.state.response:""})}},{key:"render",value:function(){var e;return"driver"===this.state.userType?e=s.a.createElement("div",null,s.a.createElement("h2",null,"Congrats!")):"customer"===this.state.userType&&(e=s.a.createElement("div",null,s.a.createElement("h2",null,"Congrats! Your package was successfully added."),s.a.createElement("div",null,"You can now relax, while we're finding the best driver for your delivery."))),s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,null),s.a.createElement("div",{className:"main-content"},s.a.createElement(k.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile",style:{paddingTop:"24px",textAlign:"center"}},s.a.createElement("img",{style:{width:"150px"},alt:"Shows a route between two points",src:"/assets/distance.png"}),e):s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page.")})))}}]),t}(n.Component));a(17).config();var ee=P(function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleSubmit=function(t){e.props.history.push({pathname:"/driver-select-packages",state:{currentLatLng:e.state.currentLatLng,timeAvailable:e.state.time}})},e.state={startLocation:{lat:48.57767,lng:9.265834},destination:{lat:48.558917,lng:9.211809},time:0,userToken:null},e.pickedUpButton=s.a.createRef(),e.submittedButton=s.a.createRef(),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.props.location.state&&this.setState({userToken:this.props.location.state.userToken})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,{currentPage:"delivery"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(k.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile"},s.a.createElement("h2",null,"Here's your route!"),s.a.createElement(Y,{allowMultipleClicks:"false",showAutoCompleteBar:"false",startLocation:e.state.startLocation,destination:e.state.destination,calculateRoute:"true"}),s.a.createElement("button",{className:"buttons",ref:e.pickedUpButton},"Picked Up"),s.a.createElement("button",{className:"buttons cta-button",ref:e.submittedButton,style:{float:"right"}},"Submitted")):s.a.createElement("div",null,s.a.createElement("div",{className:"userNotLoggedInlabel"},"Please log in to access this page."))})))}}]),t}(n.Component)),te=P(function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={packages:[],userToken:null},e.removePackage=e.removePackage.bind(Object(H.a)(Object(H.a)(e))),e.getUserPackages=e.getUserPackages.bind(Object(H.a)(Object(H.a)(e))),e.getUserToken=e.getUserToken.bind(Object(H.a)(Object(H.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.getUserToken()}},{key:"getUserPackages",value:function(){var e=this,t=JSON.stringify({action:"list",user_token:this.state.userToken,parcel_id:""});K.a.post("https://us-central1-studienarbeit.cloudfunctions.net/parcel",t,{headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t.data.list),e.setState({packages:t.data.list})}).catch(function(e){console.log(e)})}},{key:"getUserToken",value:function(){U.a.auth().currentUser&&U.a.auth().currentUser.getIdToken(!0).then(function(e){this.setState({userToken:e},this.getUserPackages)}.bind(this)).catch(function(e){})}},{key:"removePackage",value:function(e,t){this.state.packages.length>0&&(e.preventDefault(),"my-packages-container"!==e.target.parentElement.id&&(e.target.parentElement.classList.add("hidden"),setTimeout(function(){var e=this.state.packages.filter(function(e){return e.parcel_id!==t});this.setState({packages:e})}.bind(this),1150)))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(O,null),s.a.createElement(w,{currentPage:"package"}),s.a.createElement("div",{className:"main-content"},s.a.createElement(k.Consumer,null,function(t){return t?s.a.createElement("div",{className:"tile",style:{height:"400px",padding:"25px"}},s.a.createElement("div",{id:"my-packages-container"},s.a.createElement("h2",null,"Manage your packages."),s.a.createElement(p.a,{to:"/new-package"},s.a.createElement("button",{className:"buttons cta-button",style:{position:"absolute",top:"40px",right:"20px"}},"Add Package")),e.state.packages.map(function(t,a){return s.a.createElement("div",{className:"listed-packages",key:a,onClick:function(a){return e.removePackage(a,t)}},s.a.createElement("span",{className:"packages-table"},t),s.a.createElement("input",{alt:"",className:"delete-package-button",src:"/assets/delete-button.png",type:"image"}))}))):s.a.createElement("div",{className:"userNotLoggedIn-label"},"Please log in to access this page.")})))}}]),t}(n.Component)),ae=a(181),ne=a(182),se=a(180);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(17).load(),i.a.render(s.a.createElement(g.Provider,{value:new E},s.a.createElement(ae.a,null,s.a.createElement(ne.a,null,s.a.createElement(se.a,{exact:!0,path:"/",component:j}),s.a.createElement(se.a,{exact:!0,path:"/login",component:B}),s.a.createElement(se.a,{exact:!0,path:"/signup",component:R}),s.a.createElement(se.a,{exact:!0,path:"/profile",component:F}),s.a.createElement(se.a,{exact:!0,path:"/profile-edit",component:Z}),s.a.createElement(se.a,{exact:!0,path:"/new-package",component:G}),s.a.createElement(se.a,{exact:!0,path:"/packages",component:te}),s.a.createElement(se.a,{exact:!0,path:"/driver-select-packages",component:q}),s.a.createElement(se.a,{exact:!0,path:"/driver",component:Q}),s.a.createElement(se.a,{exact:!0,path:"/driver-confirm",component:X}),s.a.createElement(se.a,{exact:!0,path:"/driver-route",component:ee}),s.a.createElement(se.a,{exact:!0,path:"/final",component:$})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},89:function(e,t,a){e.exports=a(177)},94:function(e,t,a){}},[[89,2,1]]]);
//# sourceMappingURL=main.1f74a930.chunk.js.map